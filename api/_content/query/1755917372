[{"_path":"/configuration/multiple-files","_draft":false,"_partial":false,"_empty":false,"title":"Merging","description":"Couper supports merging of blocks and attributes from multiple configuration files\n(see Global Options of Command Line Interface).","excerpt":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"merging"},"children":[{"type":"text","value":"Merging"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Couper supports merging of blocks and attributes from multiple configuration files\n(see "},{"type":"element","tag":"a","props":{"href":"command-line#global-options"},"children":[{"type":"text","value":"Global Options of Command Line Interface"}]},{"type":"text","value":")."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"#merging"},"children":[{"type":"text","value":"Merging"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"#general-rules-of-merging"},"children":[{"type":"text","value":"General Rules of Merging"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"#merging-of-server-blocks"},"children":[{"type":"text","value":"Merging of "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"server"}]},{"type":"text","value":" Blocks"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"#merging-of-definitions-blocks"},"children":[{"type":"text","value":"Merging of "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"definitions"}]},{"type":"text","value":" Blocks"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"#merging-of-defaults-blocks"},"children":[{"type":"text","value":"Merging of "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"defaults"}]},{"type":"text","value":" Blocks"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"#merging-of-settings-blocks"},"children":[{"type":"text","value":"Merging of "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"settings"}]},{"type":"text","value":" Blocks"}]}]}]},{"type":"element","tag":"h2","props":{"id":"general-rules-of-merging"},"children":[{"type":"text","value":"General Rules of Merging"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"When merging, all attributes (except "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"environment_variables"}]},{"type":"text","value":" in the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"defaults"}]},{"type":"text","value":" block) replace existing attributes with the same name, if any, otherwise they are added."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Blocks that cannot have labels (eg. "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"cors"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"files"}]},{"type":"text","value":" etc.) replace existing blocks with the same name, if any, otherwise they are added."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Blocks with optional labels (eg. "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"server"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"api"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"spa"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"files"}]},{"type":"text","value":" etc.) are merged recursively with blocks with the same label (blocks without a label are merged with blocks with the same name and no label in each context), if any, otherwise they are added. Only one unlabeled block of the same type is allowed in each context (eg. "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"api"}]},{"type":"text","value":" blocks in a "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"server"}]},{"type":"text","value":" block)."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Blocks with required label (eg. "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"endpoint"}]},{"type":"text","value":") replace existing blocks with the same name and label in each context, if any, otherwise they are added."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Blocks with (optional) multiple labels (eg. "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"error_handler"}]},{"type":"text","value":") replace existing blocks with identical labels, if any, otherwise they are added."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Currently, here is no way to remove an attribute or a block from the configuration."}]},{"type":"element","tag":"h2","props":{"id":"merging-of-server-blocks"},"children":[{"type":"text","value":"Merging of "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"server"}]},{"type":"text","value":" Blocks"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"When "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"server"}]},{"type":"text","value":" blocks are merged:"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"All attributes replace existing attributes with the same name, if any, otherwise they are added."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"cors"}]},{"type":"text","value":" blocks replace existing blocks with the same name, if any, otherwise, they are added."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"All "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"endpoint"}]},{"type":"text","value":" blocks replace existing blocks with the same label, if any, otherwise they are added."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"When "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"spa"}]},{"type":"text","value":" or "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"files"}]},{"type":"text","value":" blocks are merged:"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"All attributes replace existing attributes with the same name, if any, otherwise they are added."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"cors"}]},{"type":"text","value":" block replaces existing "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"cors"}]},{"type":"text","value":" block, if any, otherwise a new "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"cors"}]},{"type":"text","value":" block is added."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"When "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"api"}]},{"type":"text","value":" blocks are merged:"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"All attributes replace existing attributes with the same name, if any, otherwise they are added."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"cors"}]},{"type":"text","value":" block replaces existing "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"cors"}]},{"type":"text","value":" block, if any, otherwise a new "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"cors"}]},{"type":"text","value":" block is added."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"All "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"endpoint"}]},{"type":"text","value":" blocks replace existing blocks with the same label, if any, otherwise they are added."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"All "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"error_handler"}]},{"type":"text","value":" blocks replace existing blocks with identical labels, if any, otherwise they are added."}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Note:"}]},{"type":"text","value":" An "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"error_handler"}]},{"type":"text","value":" block cannot be replaced in or added to an "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"endpoint"}]},{"type":"text","value":" block. Therefore, the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"endpoint"}]},{"type":"text","value":" block must be completely replaced."}]},{"type":"element","tag":"h2","props":{"id":"merging-of-definitions-blocks"},"children":[{"type":"text","value":"Merging of "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"definitions"}]},{"type":"text","value":" Blocks"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"definitions"}]},{"type":"text","value":" blocks are merged recursively, if any, otherwise a new "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"definitions"}]},{"type":"text","value":" block is added."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"All blocks inside a "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"definitions"}]},{"type":"text","value":" block replace existing blocks with the same name and label."}]}]},{"type":"element","tag":"h2","props":{"id":"merging-of-defaults-blocks"},"children":[{"type":"text","value":"Merging of "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"defaults"}]},{"type":"text","value":" Blocks"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"defaults"}]},{"type":"text","value":" blocks are merged recursively, if any, otherwise a new "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"defaults"}]},{"type":"text","value":" block is added."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"All attributes inside a "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"defaults"}]},{"type":"text","value":" block (except "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"environment_variables"}]},{"type":"text","value":") replace existing attributes with the same name, if any, otherwise they are added."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Single values of an "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"environment_variables"}]},{"type":"text","value":" attribute replace existing values with the same key, if any, otherwise they are added."}]}]},{"type":"element","tag":"h2","props":{"id":"merging-of-settings-blocks"},"children":[{"type":"text","value":"Merging of "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"settings"}]},{"type":"text","value":" Blocks"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"settings"}]},{"type":"text","value":" blocks are merged recursively, if any, otherwise a new "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"settings"}]},{"type":"text","value":" block is added."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"All attributes inside a "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"settings"}]},{"type":"text","value":" block replace existing attributes with the same name, if any, otherwise they are added."}]}]}]},"_type":"markdown","_id":"content:2.configuration:8.multiple-files.md","_source":"content","_file":"2.configuration/8.multiple-files.md","_extension":"md"},{"_path":"/observation/metrics","_draft":false,"_partial":false,"_empty":false,"title":"Metrics","description":"","excerpt":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"metrics"},"children":[{"type":"text","value":"Metrics"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"#metrics"},"children":[{"type":"text","value":"Metrics"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"#prometheus"},"children":[{"type":"text","value":"Prometheus"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"#grafana-dashboard"},"children":[{"type":"text","value":"Grafana Dashboard"}]}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"#preview"},"children":[{"type":"text","value":"Preview"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"#developers"},"children":[{"type":"text","value":"Developers"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Our metrics feature is "},{"type":"element","tag":"a","props":{"href":"/getting-started/beta-features"},"children":[{"type":"text","value":"beta"}]},{"type":"text","value":" for now. However, we want to provide some core metrics which can be directly collected from Couper."}]},{"type":"element","tag":"h2","props":{"id":"prometheus"},"children":[{"type":"text","value":"Prometheus"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Couper provides a built-in "},{"type":"element","tag":"a","props":{"href":"https://prometheus.io/","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"text","value":"Prometheus"}]},{"type":"text","value":" exporter. It is configurable with "},{"type":"element","tag":"a","props":{"href":"/configuration/block/settings"},"children":[{"type":"text","value":"settings"}]},{"type":"text","value":" like port or "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"service_name"}]},{"type":"text","value":" label. If enabled the default scrape target port is "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"9090"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h2","props":{"id":"grafana-dashboard"},"children":[{"type":"text","value":"Grafana Dashboard"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Couper provides a maintained Grafana dashboard which you can find here: "},{"type":"element","tag":"a","props":{"href":"https://github.com/avenga/couper/blob/master/grafana.json","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"text","value":"grafana.json"}]},{"type":"text","value":"\nand import this JSON model to your grafana instance.\nYou may have to set your Datasource to your Prometheus one."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If you're missing some configuration options or have feedback: Feel free to open a "},{"type":"element","tag":"a","props":{"href":"https://github.com/avenga/couper/discussions","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"text","value":"discussion"}]},{"type":"text","value":" or\nan "},{"type":"element","tag":"a","props":{"href":"https://github.com/avenga/couper/issues","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"text","value":"issue"}]},{"type":"text","value":" if something does not work as expected or shown values does not make any sense."}]},{"type":"element","tag":"h3","props":{"id":"preview"},"children":[{"type":"text","value":"Preview"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"dashboard","src":"/img/grafana.png"},"children":[]}]},{"type":"element","tag":"h2","props":{"id":"developers"},"children":[{"type":"text","value":"Developers"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If you are interested in contributing to our metrics or refine the grafana dashboard: "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"make docker-telemetry"}]},{"type":"text","value":" will spin up the stack for you."}]}]},"_type":"markdown","_id":"content:3.observation:metrics.md","_source":"content","_file":"3.observation/metrics.md","_extension":"md"}]