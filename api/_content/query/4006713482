[{"_path":"/configuration/block/open-api","_draft":false,"_partial":false,"_empty":false,"title":"OpenAPI","description":"The openapi block configures the backends proxy behavior to validate outgoing\nand incoming requests to and from the origin. Preventing the origin from invalid\nrequests, and the Couper client from invalid answers. An example can be found\nhere.\nTo do so Couper uses the OpenAPI 3 standard to load\nthe definitions from a given document defined with the file attribute.","excerpt":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"openapi"},"children":[{"type":"text","value":"OpenAPI"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"openapi"}]},{"type":"text","value":" block configures the backends proxy behavior to validate outgoing\nand incoming requests to and from the origin. Preventing the origin from invalid\nrequests, and the Couper client from invalid answers. An example can be found\n"},{"type":"element","tag":"a","props":{"href":"https://github.com/avenga/couper-examples/blob/master/backend-validation/README.md","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"text","value":"here"}]},{"type":"text","value":".\nTo do so Couper uses the "},{"type":"element","tag":"a","props":{"href":"https://www.openapis.org/","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"text","value":"OpenAPI 3 standard"}]},{"type":"text","value":" to load\nthe definitions from a given document defined with the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"file"}]},{"type":"text","value":" attribute."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"⚠ While ignoring request violations an invalid method or path would\nlead to a non-matching "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"route"}]},{"type":"text","value":" which is still required for response validations.\nIn this case the response validation will fail if not ignored too."}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Block name"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Context"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Label"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Nested block(s)"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"openapi"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"#backend-block"},"children":[{"type":"text","value":"Backend Block"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]}]}]}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Attribute(s)"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Type"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Default"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Description"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Characteristic(s)"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Example"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"file"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"OpenAPI yaml definition file."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"⚠ required"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"file = \"openapi.yaml\""}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ignore_request_violations"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"bool"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"false"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Log request validation results, skip error handling."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ignore_response_violations"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"bool"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"false"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Log response validation results, skip error handling."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]}]}]}]}]},"_type":"markdown","_id":"content:2.configuration:4.block:open-api.md","_source":"content","_file":"2.configuration/4.block/open-api.md","_extension":"md"},{"_path":"/configuration/block/request","_draft":false,"_partial":false,"_empty":false,"title":"Request","description":"The request block creates and executes a request to a backend service.","excerpt":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"request"},"children":[{"type":"text","value":"Request"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"request"}]},{"type":"text","value":" block creates and executes a request to a backend service."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"⚠ Multiple "},{"type":"element","tag":"a","props":{"href":"#proxy-block"},"children":[{"type":"text","value":"Proxy"}]},{"type":"text","value":" and "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"request"}]},{"type":"text","value":" blocks are executed in parallel."}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Block name"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Context"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Label"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Nested block(s)"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"request"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"#endpoint-block"},"children":[{"type":"text","value":"Endpoint Block"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"⚠ A "},{"type":"element","tag":"a","props":{"href":"#proxy-block"},"children":[{"type":"text","value":"Proxy Block"}]},{"type":"text","value":" or "},{"type":"element","tag":"a","props":{"href":"#request-block"},"children":[{"type":"text","value":"Request Block"}]},{"type":"text","value":" w/o a label has an implicit label "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"\"default\""}]},{"type":"text","value":". Only "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"one"}]},{"type":"text","value":" "},{"type":"element","tag":"a","props":{"href":"#proxy-block"},"children":[{"type":"text","value":"Proxy Block"}]},{"type":"text","value":" or "},{"type":"element","tag":"a","props":{"href":"#request-block"},"children":[{"type":"text","value":"Request Block"}]},{"type":"text","value":" w/ label "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"\"default\""}]},{"type":"text","value":" per "},{"type":"element","tag":"a","props":{"href":"#endpoint-block"},"children":[{"type":"text","value":"Endpoint Block"}]},{"type":"text","value":" is allowed."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"#backend-block"},"children":[{"type":"text","value":"Backend Block"}]},{"type":"text","value":" (⚠ required, if no "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"backend"}]},{"type":"text","value":" block reference is defined or no "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"url"}]},{"type":"text","value":" attribute is set."}]}]}]}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Attribute(s)"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Type"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Default"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Description"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Characteristic(s)"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Example"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"backend"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"backend"}]},{"type":"text","value":" block reference, defined in "},{"type":"element","tag":"a","props":{"href":"#definitions-block"},"children":[{"type":"text","value":"Definitions Block"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"⚠ required, if no "},{"type":"element","tag":"a","props":{"href":"#backend-block"},"children":[{"type":"text","value":"Backend Block"}]},{"type":"text","value":" is defined."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"backend = \"foo\""}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"body"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Creates implicit default "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Content-Type: text/plain"}]},{"type":"text","value":" header field."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"expected_status"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"tuple (number)"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"If defined, the response status code will be verified against this list of codes. If the status-code is unexpected an "},{"type":"element","tag":"a","props":{"href":"ERRORS.md#error-types"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"unexpected_status"}]},{"type":"text","value":" error"}]},{"type":"text","value":" can be handled with an "},{"type":"element","tag":"a","props":{"href":"ERRORS.md#endpoint-related-error_handler"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"error_handler"}]}]},{"type":"text","value":"."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"form_body"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"object"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Creates implicit default "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Content-Type: application/x-www-form-urlencoded"}]},{"type":"text","value":" header field."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"headers"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"object"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Same as "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"set_request_headers"}]},{"type":"text","value":" in "},{"type":"element","tag":"a","props":{"href":"#request-header"},"children":[{"type":"text","value":"Request Header"}]},{"type":"text","value":"."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"json_body"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"null, bool, number, string, object, tuple"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Creates implicit default "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Content-Type: text/plain"}]},{"type":"text","value":" header field."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"method"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"\"GET\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"query_params"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Same as "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"set_query_params"}]},{"type":"text","value":" in "},{"type":"element","tag":"a","props":{"href":"#query-parameter"},"children":[{"type":"text","value":"Query Parameter"}]},{"type":"text","value":"."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"url"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"If defined, the host part of the URL must be the same as the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"origin"}]},{"type":"text","value":" attribute of the used "},{"type":"element","tag":"a","props":{"href":"#backend-block"},"children":[{"type":"text","value":"Backend Block"}]},{"type":"text","value":" or "},{"type":"element","tag":"a","props":{"href":"#backend-block"},"children":[{"type":"text","value":"Backend Block Reference"}]},{"type":"text","value":" (if defined)."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]}]}]}]}]},"_type":"markdown","_id":"content:2.configuration:4.block:request.md","_source":"content","_file":"2.configuration/4.block/request.md","_extension":"md"}]