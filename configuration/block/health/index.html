<!DOCTYPE html>
<html  data-head-attrs="">

<head >
  <title>Health</title><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="prefetch" href="/api/_content/navigation"><link rel="prefetch" href="/api/_content/query/2621092169"><link rel="prefetch" href="/api/_content/query/634411275"><link rel="prefetch" href="/api/_content/navigation"><link rel="prefetch" href="/api/_content/query/2621092169"><meta name="description" content="Defines a recurring health check request for its backend. Results can be obtained via the backends.&lt;label&gt;.health variables.
Changes in health states and related requests will be logged. Default User-Agent will be Couper / &lt;version&gt; health-check if not provided
via headers attribute. An unhealthy backend will return with a backend_unhealthy error."><meta name="head:count" content="8"><link rel="modulepreload" href="/_nuxt/entry-43b25c15.mjs" as="script" crossorigin><link rel="preload" href="/_nuxt/entry.37f68518.css" as="style"><link rel="modulepreload" href="/_nuxt/default-63e7bf38.mjs" as="script" crossorigin><link rel="preload" href="/_nuxt/default.3ed79c4b.css" as="style"><link rel="modulepreload" href="/_nuxt/Logo-d5b51ac1.mjs" as="script" crossorigin><link rel="modulepreload" href="/_nuxt/ContentNavigation-a3964eed.mjs" as="script" crossorigin><link rel="modulepreload" href="/_nuxt/_...slug_-b71647c9.mjs" as="script" crossorigin><link rel="modulepreload" href="/_nuxt/ProseH1-f3faf32d.mjs" as="script" crossorigin><link rel="modulepreload" href="/_nuxt/ProseP-7b981514.mjs" as="script" crossorigin><link rel="modulepreload" href="/_nuxt/ProseA-03f85eac.mjs" as="script" crossorigin><link rel="modulepreload" href="/_nuxt/ProseCodeInline-0af654ef.mjs" as="script" crossorigin><link rel="modulepreload" href="/_nuxt/ProseTable-4cc72f65.mjs" as="script" crossorigin><link rel="modulepreload" href="/_nuxt/ProseThead-726bca02.mjs" as="script" crossorigin><link rel="modulepreload" href="/_nuxt/ProseTr-9416f218.mjs" as="script" crossorigin><link rel="modulepreload" href="/_nuxt/ProseTh-3d5493aa.mjs" as="script" crossorigin><link rel="modulepreload" href="/_nuxt/ProseTbody-f73c86f8.mjs" as="script" crossorigin><link rel="modulepreload" href="/_nuxt/ProseTd-557c3c5d.mjs" as="script" crossorigin><link rel="modulepreload" href="/_nuxt/Attributes-592f0525.mjs" as="script" crossorigin><link rel="prefetch" as="script" href="/_nuxt/Duration-06cb5690.mjs"><link rel="prefetch" as="script" href="/_nuxt/ContentList-2f3f3b8d.mjs"><link rel="prefetch" as="script" href="/_nuxt/Markdown-8789a3f8.mjs"><link rel="prefetch" as="script" href="/_nuxt/ProseBlockquote-9874a331.mjs"><link rel="prefetch" as="script" href="/_nuxt/ProseCode-03cea70e.mjs"><link rel="prefetch stylesheet" href="/_nuxt/ProseCode.c12da1e5.css"><link rel="prefetch" as="script" href="/_nuxt/ProseEm-c188b558.mjs"><link rel="prefetch" as="script" href="/_nuxt/ProseH2-2551a35a.mjs"><link rel="prefetch" as="script" href="/_nuxt/ProseH3-b68f3a31.mjs"><link rel="prefetch" as="script" href="/_nuxt/ProseH4-8379da33.mjs"><link rel="prefetch" as="script" href="/_nuxt/ProseH5-95a3f598.mjs"><link rel="prefetch" as="script" href="/_nuxt/ProseH6-45ac1f14.mjs"><link rel="prefetch" as="script" href="/_nuxt/ProseHr-ca9242cd.mjs"><link rel="prefetch" as="script" href="/_nuxt/ProseImg-7c08b9de.mjs"><link rel="prefetch" as="script" href="/_nuxt/ProseLi-2c77ad2f.mjs"><link rel="prefetch" as="script" href="/_nuxt/ProseOl-ac75c31a.mjs"><link rel="prefetch" as="script" href="/_nuxt/ProseStrong-dfcc5076.mjs"><link rel="prefetch" as="script" href="/_nuxt/ProseUl-2fdefb06.mjs"><link rel="prefetch" as="script" href="/_nuxt/document-driven-b84890cb.mjs"><link rel="prefetch" as="script" href="/_nuxt/algoliasearch-lite.esm.browser-bedf3355.mjs"><link rel="prefetch" as="script" href="/_nuxt/algoliasearch.esm.browser-4b0994bc.mjs"><link rel="prefetch" as="script" href="/_nuxt/recommend.esm.browser-416aafe6.mjs"><link rel="prefetch" as="script" href="/_nuxt/web-socket-74dfc10d.mjs"><link rel="stylesheet" href="/_nuxt/entry.37f68518.css"><link rel="stylesheet" href="/_nuxt/default.3ed79c4b.css">
</head>

<body  data-head-attrs="">
  <div id="__nuxt"><div class="antialiasing text-slate-500 bg-white"><div class="absolute z-20 top-0 inset-x-0 flex justify-center overflow-hidden pointer-events-none"></div><div class="max-w-8xl mx-auto sticky top-0 z-40 w-full backdrop-blur flex-none transition-colors duration-500 lg:z-50 lg:border-b lg:border-slate-900/10 dark:border-slate-50/[0.06] bg-white supports-backdrop-blur:bg-white/95 dark:bg-slate-700/90"><div class="py-4 border-b border-slate-900/10 lg:px-8 lg:border-0 dark:border-slate-300/10 mx-4 lg:mx-0"><div class="relative flex items-center"><svg width="30%" height="30%" viewbox="0 0 152 165" xmlns="http://www.w3.org/2000/svg" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;" class="box-border h-16 w-16 md:w-18 md:h-18 xl:w-22 xl:h-22"><g id="Page-1"><g id="Desktop-HD-Copy"><g id="couper-4"><g id="Group-39"><g id="Layer1"><path d="M15,116c0,0 -6.651,-73.835 61,-74c65.001,-0.158 62,74 62,74c0,0 -58.325,18.728 -123,0Z" style="fill:#fff;"></path></g><path id="Fill-2" d="M87.395,42.775c-3.714,-0.699 -7.537,-1.106 -11.457,-1.106c-33.907,-0 -61.394,27.439 -61.394,61.286l-0,11.331l22.913,6.435l-0,-17.766c-0,-29.935 21.511,-54.818 49.938,-60.18" style="fill:#e3e4e4;"></path><path id="Path" d="M97.262,0.364l-8.564,14.806l-8.479,-14.806l-8.569,14.821l-8.537,-14.806l-8.569,14.812l-2.537,-4.38l-12.157,0l0,6.029l8.669,0l6.025,10.408l8.557,-14.797l8.54,14.806l8.551,-14.791l8.479,14.803l8.564,-14.803l2.533,4.422l10.107,0l-0,-6.028l-6.604,-0l-6.009,-10.496Z" style="fill:#65b32e;"></path><path id="Fill-12" d="M40.784,15.473c1.062,-3.264 -0.732,-6.771 -4.002,-7.827c-3.27,-1.056 -6.778,0.731 -7.84,3.999c-1.059,3.26 0.736,6.766 4.001,7.823c3.274,1.056 6.783,-0.731 7.841,-3.995" style="fill:#fff;"></path><path id="Fill-121" serif:id="Fill-12" d="M122.784,15.473c1.062,-3.264 -0.732,-6.771 -4.002,-7.827c-3.27,-1.056 -6.778,0.731 -7.84,3.999c-1.059,3.26 0.736,6.766 4.001,7.823c3.274,1.056 6.783,-0.731 7.841,-3.995" style="fill:#fff;"></path><path id="Fill-4" d="M17.565,114.748l-0,-11.795c-0,-32.129 26.186,-58.269 58.372,-58.269c32.189,0 58.375,26.14 58.375,58.269l-0,11.756c-6.208,1.724 -26.413,6.514 -59.115,6.514c-32.536,-0 -51.711,-4.742 -57.632,-6.475m12.942,-101.15c-0,-2.43 1.978,-4.404 4.412,-4.404c2.433,0 4.411,1.974 4.411,4.404c0,2.429 -1.978,4.404 -4.411,4.404c-2.434,-0 -4.412,-1.975 -4.412,-4.404m81.771,-0c-0,-2.43 1.981,-4.404 4.415,-4.404c2.433,0 4.411,1.974 4.411,4.404c0,2.429 -1.978,4.404 -4.411,4.404c-2.434,-0 -4.415,-1.975 -4.415,-4.404m7.621,42.492l0,-32.614c4.189,-1.363 7.244,-5.251 7.244,-9.878c0,-5.751 -4.689,-10.433 -10.45,-10.433c-5.765,0 -10.454,4.682 -10.454,10.433c-0,4.765 3.237,8.75 7.621,9.992l0,27.506c-10.653,-7.786 -23.737,-12.44 -37.923,-12.44c-14.183,-0 -27.267,4.654 -37.92,12.44l-0,-27.587c4.245,-1.326 7.352,-5.245 7.352,-9.911c0,-5.751 -4.689,-10.433 -10.45,-10.433c-5.762,0 -10.451,4.682 -10.451,10.433c-0,4.726 3.185,8.681 7.509,9.959l0,32.533c-12.552,11.741 -20.451,28.38 -20.451,46.863l-0,49.187l6.039,0l-0,-31.113c5.628,1.54 17.175,4.105 34.846,5.408l-0.021,25.702l6.039,0.006l0.021,-25.332c5.146,0.272 10.69,0.441 16.747,0.441c6.58,-0 12.601,-0.199 18.169,-0.513l-0.018,25.398l6.039,0.006l0.021,-25.802c17.532,-1.353 29.236,-3.888 34.904,-5.377l-0,31.176l6.039,0l0,-49.187c0,-18.483 -7.899,-35.122 -20.452,-46.863" style="fill:#1a1b1c;"></path><path id="Fill-6" d="M82.703,87.309c-0,7.479 6.072,13.54 13.564,13.54c7.492,0 13.561,-6.061 13.561,-13.54c0,-7.475 -6.069,-13.54 -13.561,-13.54c-7.492,0 -13.564,6.065 -13.564,13.54" style="fill:#3ea1c1;"></path><path id="Fill-8" d="M96.266,76.784c-5.813,0 -10.544,4.721 -10.544,10.526c-0,5.803 4.731,10.526 10.544,10.526c5.813,0 10.545,-4.723 10.545,-10.526c-0,-5.805 -4.732,-10.526 -10.545,-10.526m0,27.081c-9.143,-0 -16.584,-7.425 -16.584,-16.555c0,-9.127 7.441,-16.554 16.584,-16.554c9.143,-0 16.584,7.427 16.584,16.554c-0,9.13 -7.441,16.555 -16.584,16.555" style="fill:#1a1b1c;"></path><path id="Fill-10" d="M100.992,87.309c-0,-2.604 -2.117,-4.714 -4.726,-4.714c-2.609,-0 -4.723,2.11 -4.723,4.714c0,2.605 2.114,4.718 4.723,4.718c2.609,-0 4.726,-2.113 4.726,-4.718" style="fill:#1a1b1c;"></path><path id="Fill-122" serif:id="Fill-12" d="M104.858,82.514c0.806,-2.478 -0.556,-5.139 -3.038,-5.941c-2.482,-0.802 -5.145,0.555 -5.952,3.035c-0.803,2.475 0.559,5.137 3.038,5.938c2.485,0.802 5.149,-0.554 5.952,-3.032" style="fill:#fff;"></path><path id="Fill-14" d="M28.878,164.681l-6.039,0l-0,-3.014c-0,-4.612 -3.756,-8.361 -8.373,-8.361c-4.62,-0 -8.377,3.749 -8.377,8.361l0,3.014l-6.039,0l-0,-3.014c-0,-7.933 6.468,-14.39 14.416,-14.39c7.944,-0 14.412,6.457 14.412,14.39l0,3.014Z" style="fill:#aa64aa;"></path><path id="Fill-16" d="M151.749,164.681l-6.04,0l0,-3.014c0,-4.612 -3.756,-8.361 -8.373,-8.361c-4.62,-0 -8.376,3.749 -8.376,8.361l-0,3.014l-6.04,0l0,-3.014c0,-7.933 6.465,-14.39 14.416,-14.39c7.948,-0 14.413,6.457 14.413,14.39l-0,3.014Z" style="fill:#eb3d3e;"></path><path id="Fill-18" d="M69.836,164.681l-6.039,0l-0,-3.014c-0,-4.612 -3.757,-8.361 -8.377,-8.361c-4.617,-0 -8.373,3.749 -8.373,8.361l-0,3.014l-6.039,0l-0,-3.014c-0,-7.933 6.465,-14.39 14.412,-14.39c7.948,-0 14.416,6.457 14.416,14.39l-0,3.014Z" style="fill:#3ea1c1;"></path><path id="Fill-20" d="M110.792,164.681l-6.039,0l0,-3.014c0,-4.612 -3.756,-8.361 -8.376,-8.361c-4.617,-0 -8.374,3.749 -8.374,8.361l0,3.014l-6.039,0l0,-3.014c0,-7.933 6.465,-14.39 14.413,-14.39c7.947,-0 14.415,6.457 14.415,14.39l0,3.014Z" style="fill:#f6ab1f;"></path></g></g></g></g></svg><h1 class="text-lg font-medium text-slate-50 align-top p-4">Couper Documentation</h1><div class="box-border text-base"><div class="rounded-md bg-lime-500 p-0.5">edge</div></div><div class="hidden w-full lg:flex items-center text-sm pl-4"><div class="ais-InstantSearch"><!--v-if--><!--v-if--></div></div></div></div></div><div class="hidden lg:block fixed z-20 inset-0 pt-[7.56rem] left-0 right-auto w-[15rem] overflow-y-auto"><nav class="lg:text-sm lg:leading-6 bg-slate-600 text-gray-400 pl-4 pt-2"><!--[--><!--[--><div><div class="font-semibold text-lg text-gray-50">Getting Started</div><!--[--><div class="text-base pl-2"><div class="text-base"><a href="/getting-started/introduction" class="pl-2 border-l-2">Introduction</a></div></div><div class="text-base pl-2"><div class="text-base"><a href="/getting-started/running-couper" class="pl-2 border-l-2">Running Couper</a></div></div><div class="text-base pl-2"><div class="text-base"><a href="/getting-started/examples" class="pl-2 border-l-2">Examples</a></div></div><div class="text-base pl-2"><div class="text-base"><a href="/getting-started/beta-features" class="pl-2 border-l-2">About beta features</a></div></div><!--]--></div><div><div class="font-semibold text-lg text-gray-50">Configuration</div><!--[--><div class="text-base pl-2"><div class="text-base"><a href="/configuration/command-line" class="pl-2 border-l-2">Command Line Interface</a></div></div><div class="text-base pl-2"><div class="text-base"><a href="/configuration/configuration-file" class="pl-2 border-l-2">Configuration File</a></div></div><div class="text-base pl-2"><div class="text-base"><a href="/configuration/expressions" class="pl-2 border-l-2">Expressions</a></div></div><div class="text-base pl-2"><div class="text-base"><a href="/configuration/modifiers" class="pl-2 border-l-2">Modifiers</a></div></div><div class="text-base pl-2"><div class="pl-2"><div class="font-semibold text-gray-50">Block</div><!--[--><div class="pl-2 border-l-2"><a href="/configuration/block/api" class="">Api</a></div><div class="pl-2 border-l-2"><a href="/configuration/block/backend" class="">Backend</a></div><div class="pl-2 border-l-2"><a href="/configuration/block/basic_auth" class="">Basic Auth</a></div><div class="pl-2 border-l-2"><a href="/configuration/block/cors" class="">Cors</a></div><div class="pl-2 border-l-2"><a href="/configuration/block/defaults" class="">Defaults</a></div><div class="pl-2 border-l-2"><a href="/configuration/block/definitions" class="">Definitions</a></div><div class="pl-2 border-l-2"><a href="/configuration/block/endpoint" class="">Endpoint</a></div><div class="pl-2 border-l-2"><a href="/configuration/block/environment" class="">Environment</a></div><div class="pl-2 border-l-2"><a href="/configuration/block/files" class="">Files</a></div><div class="pl-2 border-l-2 border-sky-500 bg-sky-900 text-sky-200 rounded-r-md"><a aria-current="page" href="/configuration/block/health" class="router-link-active router-link-exact-active">Health</a></div><div class="pl-2 border-l-2"><a href="/configuration/block/jwt" class="">JWT</a></div><div class="pl-2 border-l-2"><a href="/configuration/block/jwtsigning_profile" class="">JWT Signing Profile</a></div><div class="pl-2 border-l-2"><a href="/configuration/block/oauth2ac" class="">OAuth2 AC (Beta)</a></div><div class="pl-2 border-l-2"><a href="/configuration/block/oauth2req_auth" class="">OAuth2</a></div><div class="pl-2 border-l-2"><a href="/configuration/block/oidc" class="">Oidc</a></div><div class="pl-2 border-l-2"><a href="/configuration/block/open_api" class="">OpenAPI</a></div><div class="pl-2 border-l-2"><a href="/configuration/block/proxy" class="">Proxy</a></div><div class="pl-2 border-l-2"><a href="/configuration/block/request" class="">Request</a></div><div class="pl-2 border-l-2"><a href="/configuration/block/response" class="">Response</a></div><div class="pl-2 border-l-2"><a href="/configuration/block/saml" class="">SAML</a></div><div class="pl-2 border-l-2"><a href="/configuration/block/server" class="">Server</a></div><div class="pl-2 border-l-2"><a href="/configuration/block/settings" class="">Settings</a></div><div class="pl-2 border-l-2"><a href="/configuration/block/spa" class="">SPA</a></div><div class="pl-2 border-l-2"><a href="/configuration/block/websockets" class="">Websockets</a></div><!--]--></div></div><div class="text-base pl-2"><div class="text-base"><a href="/configuration/variables" class="pl-2 border-l-2">Variables</a></div></div><div class="text-base pl-2"><div class="text-base"><a href="/configuration/functions" class="pl-2 border-l-2">Functions</a></div></div><div class="text-base pl-2"><div class="text-base"><a href="/configuration/error-handling" class="pl-2 border-l-2">Errors</a></div></div><div class="text-base pl-2"><div class="text-base"><a href="/configuration/multiple-files" class="pl-2 border-l-2">Merging</a></div></div><!--]--></div><div><div class="font-semibold text-lg text-gray-50">Observation</div><!--[--><div class="text-base pl-2"><div class="text-base"><a href="/observation/logging" class="pl-2 border-l-2">Logging</a></div></div><div class="text-base pl-2"><div class="text-base"><a href="/observation/metrics" class="pl-2 border-l-2">Metrics</a></div></div><!--]--></div><div><!----><!--[--><!--]--></div><!--]--><!--]--></nav></div><div class="max-w-8xl mx-auto sm:px-6"><div class="lg:pl-[17rem]"><main class="max-w-8xl pt-6 xl:max-w-none xl:ml-0 xl:mr-[15.5rem] xl:pr-16 relative z-100 mt-4 prose prose-slate prose-code:bg-sky-100 prose-code:text-sky-900 prose-code:p-1 prose-code:rounded-md prose-code:text-sm prose-blockquote:bg-purple-100 prose-blockquote:rounded-md prose-a:text-sky-600 hover:prose-a:text-amber-500"><!--[--><div><!--[--><div><h1 id="health"><!--[-->Health<!--]--></h1><p><!--[-->Defines a recurring health check request for its backend. Results can be obtained via the <a aria-current="page" href="/configuration/block/health#backends" class="router-link-active router-link-exact-active"><!--[--><code><!--[-->backends.&lt;label&gt;.health<!--]--></code> variables<!--]--></a>.
Changes in health states and related requests will be logged. Default User-Agent will be <code><!--[-->Couper / &lt;version&gt; health-check<!--]--></code> if not provided
via <code><!--[-->headers<!--]--></code> attribute. An unhealthy backend will return with a <a href="/configuration/block/ERRORS.md#api-error-types" class=""><!--[--><code><!--[-->backend_unhealthy<!--]--></code><!--]--></a> error.<!--]--></p><table><!--[--><thead><!--[--><tr><!--[--><th align="left"><!--[-->Block name<!--]--></th><th align="left"><!--[-->Context<!--]--></th><th align="left"><!--[-->Label<!--]--></th><th align="left"><!--[-->Nested block<!--]--></th><!--]--></tr><!--]--></thead><tbody><!--[--><tr><!--[--><td align="left"><!--[--><code><!--[-->beta_health<!--]--></code><!--]--></td><td align="left"><!--[--><a aria-current="page" href="/configuration/block/health#backend-block" class="router-link-active router-link-exact-active"><!--[--><code><!--[-->backend<!--]--></code> block<!--]--></a><!--]--></td><td align="left"><!--[-->–<!--]--></td><td align="left"><!--[--><!--]--></td><!--]--></tr><!--]--></tbody><!--]--></table><div><h3 id="attributes"><a href="#attributes">Attributes</a></h3><table class="table-auto"><thead><tr><!--[--><th>Attributes</th><th>Type</th><th>Default</th><th>Description</th><!--]--></tr></thead><tbody><!--[--><tr><!--[--><td><code>failure_threshold</code></td><td><div>number</div></td><td><div>2</div></td><td><div>failed checks needed to consider backend unhealthy</div></td><!--]--></tr><tr><!--[--><td><code>interval</code></td><td><div>string</div></td><td><div>1s</div></td><td><div>time interval for recheck</div></td><!--]--></tr><tr><!--[--><td><code>timeout</code></td><td><div>string</div></td><td><div>2s</div></td><td><div>maximum allowed time limit which is	bounded by <code>interval</code></div></td><!--]--></tr><tr><!--[--><td><code>path</code></td><td><div>string</div></td><td><div>-</div></td><td><div>URL path with query on backend host</div></td><!--]--></tr><tr><!--[--><td><code>expected_status</code></td><td><div>tuple (int)</div></td><td><div>[200, 204, 301]</div></td><td><div>one of wanted response status code</div></td><!--]--></tr><tr><!--[--><td><code>expected_text</code></td><td><div>string</div></td><td><div>-</div></td><td><div>text which the response body must contain</div></td><!--]--></tr><tr><!--[--><td><code>headers</code></td><td><div>object</div></td><td><div>-</div></td><td><div>request headers</div></td><!--]--></tr><!--]--></tbody></table></div></div><!--]--><div class="flex items-center justify-between"><div><a href="/configuration/block/files" class="">&lt; Files</a></div><div><a href="/configuration/block/jwt" class="">JWT &gt;</a></div></div></div><!--]--></main><footer class="text-sm leading-6 mt-12"><p>Copyright couper.io</p></footer></div><nav class="fixed z-20 top-[7.56rem] bottom-0 right-0 w-[19.5rem] py-8 px-6 overflow-y-auto hidden xl:block bg-slate-600 text-gray-400"><h2 class="text-gray-100">On this Page</h2><ul><!--[--><!--]--></ul></nav></div></div></div><script>window.__NUXT__=(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,$,aa,ab,ac,ad,ae,af,ag,ah,ai,aj,ak,al,am,an,ao,ap,aq,ar,as,at,au,av,aw,ax,ay,az,aA,aB,aC,aD,aE,aF,aG,aH,aI,aJ,aK,aL,aM,aN,aO,aP,aQ,aR,aS,aT,aU,aV,aW,aX,aY,aZ,a_,a$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs){return {data:{"content-query-2936526874":{_path:D,_draft:k,_partial:k,_empty:k,title:n,description:au,excerpt:{type:r,children:[{type:a,tag:s,props:{id:E},children:[{type:b,value:n}]},{type:a,tag:l,props:{},children:[{type:b,value:F},{type:a,tag:i,props:{href:G},children:[{type:a,tag:e,props:{},children:[{type:b,value:H}]},{type:b,value:I}]},{type:b,value:J},{type:a,tag:e,props:{},children:[{type:b,value:K}]},{type:b,value:L},{type:a,tag:e,props:{},children:[{type:b,value:M}]},{type:b,value:N},{type:a,tag:i,props:{href:O},children:[{type:a,tag:e,props:{},children:[{type:b,value:P}]}]},{type:b,value:Q}]},{type:a,tag:o,props:{},children:[{type:a,tag:p,props:{},children:[{type:a,tag:h,props:{},children:[{type:a,tag:g,props:{align:c},children:[{type:b,value:t}]},{type:a,tag:g,props:{align:c},children:[{type:b,value:u}]},{type:a,tag:g,props:{align:c},children:[{type:b,value:v}]},{type:a,tag:g,props:{align:c},children:[{type:b,value:R}]}]}]},{type:a,tag:q,props:{},children:[{type:a,tag:h,props:{},children:[{type:a,tag:d,props:{align:c},children:[{type:a,tag:e,props:{},children:[{type:b,value:S}]}]},{type:a,tag:d,props:{align:c},children:[{type:a,tag:i,props:{href:w},children:[{type:a,tag:e,props:{},children:[{type:b,value:x}]},{type:b,value:T}]}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:U}]},{type:a,tag:d,props:{align:c},children:[]}]}]}]},{type:a,tag:A,props:{":values":V},children:[]}]},body:{type:r,children:[{type:a,tag:s,props:{id:E},children:[{type:b,value:n}]},{type:a,tag:l,props:{},children:[{type:b,value:F},{type:a,tag:i,props:{href:G},children:[{type:a,tag:e,props:{},children:[{type:b,value:H}]},{type:b,value:I}]},{type:b,value:J},{type:a,tag:e,props:{},children:[{type:b,value:K}]},{type:b,value:L},{type:a,tag:e,props:{},children:[{type:b,value:M}]},{type:b,value:N},{type:a,tag:i,props:{href:O},children:[{type:a,tag:e,props:{},children:[{type:b,value:P}]}]},{type:b,value:Q}]},{type:a,tag:o,props:{},children:[{type:a,tag:p,props:{},children:[{type:a,tag:h,props:{},children:[{type:a,tag:g,props:{align:c},children:[{type:b,value:t}]},{type:a,tag:g,props:{align:c},children:[{type:b,value:u}]},{type:a,tag:g,props:{align:c},children:[{type:b,value:v}]},{type:a,tag:g,props:{align:c},children:[{type:b,value:R}]}]}]},{type:a,tag:q,props:{},children:[{type:a,tag:h,props:{},children:[{type:a,tag:d,props:{align:c},children:[{type:a,tag:e,props:{},children:[{type:b,value:S}]}]},{type:a,tag:d,props:{align:c},children:[{type:a,tag:i,props:{href:w},children:[{type:a,tag:e,props:{},children:[{type:b,value:x}]},{type:b,value:T}]}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:U}]},{type:a,tag:d,props:{align:c},children:[]}]}]}]},{type:a,tag:A,props:{":values":V},children:[]}],toc:{title:W,searchDepth:X,depth:X,links:[]}},_type:Y,_id:av,_source:Z,_file:aw,_extension:_},"content-navigation-3333229237":[{title:ax,_path:ay,children:[{title:az,_path:aA},{title:aB,_path:aC},{title:aD,_path:aE},{title:aF,_path:aG}]},{title:aH,_path:aI,children:[{title:aJ,_path:aK},{title:aL,_path:aM},{title:aN,_path:aO},{title:aP,_path:aQ},{title:aR,_path:aS,children:[{title:aT,_path:aU},{title:aV,_path:aW},{title:aX,_path:aY},{title:aZ,_path:a_},{title:a$,_path:ba},{title:bb,_path:bc},{title:bd,_path:be},{title:bf,_path:bg},{title:$,_path:ah},{title:n,_path:D},{title:aa,_path:ai},{title:bh,_path:bi},{title:bj,_path:bk},{title:bl,_path:bm},{title:bn,_path:bo},{title:bp,_path:bq},{title:br,_path:bs},{title:bt,_path:bu},{title:bv,_path:bw},{title:bx,_path:by},{title:bz,_path:bA},{title:bB,_path:bC},{title:bD,_path:bE},{title:bF,_path:bG}]},{title:bH,_path:bI},{title:bJ,_path:bK},{title:bL,_path:bM},{title:bN,_path:bO}]},{title:bP,_path:bQ,children:[{title:bR,_path:bS},{title:bT,_path:bU}]},{title:bV,_path:ab}]},state:{error:bW,"content-document-driven-globals":{},"content-document-driven-navigation":[{title:ax,_path:ay,children:[{title:az,_path:aA},{title:aB,_path:aC},{title:aD,_path:aE},{title:aF,_path:aG}]},{title:aH,_path:aI,children:[{title:aJ,_path:aK},{title:aL,_path:aM},{title:aN,_path:aO},{title:aP,_path:aQ},{title:aR,_path:aS,children:[{title:aT,_path:aU},{title:aV,_path:aW},{title:aX,_path:aY},{title:aZ,_path:a_},{title:a$,_path:ba},{title:bb,_path:bc},{title:bd,_path:be},{title:bf,_path:bg},{title:$,_path:ah},{title:n,_path:D},{title:aa,_path:ai},{title:bh,_path:bi},{title:bj,_path:bk},{title:bl,_path:bm},{title:bn,_path:bo},{title:bp,_path:bq},{title:br,_path:bs},{title:bt,_path:bu},{title:bv,_path:bw},{title:bx,_path:by},{title:bz,_path:bA},{title:bB,_path:bC},{title:bD,_path:bE},{title:bF,_path:bG}]},{title:bH,_path:bI},{title:bJ,_path:bK},{title:bL,_path:bM},{title:bN,_path:bO}]},{title:bP,_path:bQ,children:[{title:bR,_path:bS},{title:bT,_path:bU}]},{title:bV,_path:ab}],"content-document-driven-page":{_path:D,_draft:k,_partial:k,_empty:k,title:n,description:au,excerpt:{type:r,children:[{type:a,tag:s,props:{id:E},children:[{type:b,value:n}]},{type:a,tag:l,props:{},children:[{type:b,value:F},{type:a,tag:i,props:{href:G},children:[{type:a,tag:e,props:{},children:[{type:b,value:H}]},{type:b,value:I}]},{type:b,value:J},{type:a,tag:e,props:{},children:[{type:b,value:K}]},{type:b,value:L},{type:a,tag:e,props:{},children:[{type:b,value:M}]},{type:b,value:N},{type:a,tag:i,props:{href:O},children:[{type:a,tag:e,props:{},children:[{type:b,value:P}]}]},{type:b,value:Q}]},{type:a,tag:o,props:{},children:[{type:a,tag:p,props:{},children:[{type:a,tag:h,props:{},children:[{type:a,tag:g,props:{align:c},children:[{type:b,value:t}]},{type:a,tag:g,props:{align:c},children:[{type:b,value:u}]},{type:a,tag:g,props:{align:c},children:[{type:b,value:v}]},{type:a,tag:g,props:{align:c},children:[{type:b,value:R}]}]}]},{type:a,tag:q,props:{},children:[{type:a,tag:h,props:{},children:[{type:a,tag:d,props:{align:c},children:[{type:a,tag:e,props:{},children:[{type:b,value:S}]}]},{type:a,tag:d,props:{align:c},children:[{type:a,tag:i,props:{href:w},children:[{type:a,tag:e,props:{},children:[{type:b,value:x}]},{type:b,value:T}]}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:U}]},{type:a,tag:d,props:{align:c},children:[]}]}]}]},{type:a,tag:A,props:{":values":V},children:[]}]},body:{type:r,children:[{type:a,tag:s,props:{id:E},children:[{type:b,value:n}]},{type:a,tag:l,props:{},children:[{type:b,value:F},{type:a,tag:i,props:{href:G},children:[{type:a,tag:e,props:{},children:[{type:b,value:H}]},{type:b,value:I}]},{type:b,value:J},{type:a,tag:e,props:{},children:[{type:b,value:K}]},{type:b,value:L},{type:a,tag:e,props:{},children:[{type:b,value:M}]},{type:b,value:N},{type:a,tag:i,props:{href:O},children:[{type:a,tag:e,props:{},children:[{type:b,value:P}]}]},{type:b,value:Q}]},{type:a,tag:o,props:{},children:[{type:a,tag:p,props:{},children:[{type:a,tag:h,props:{},children:[{type:a,tag:g,props:{align:c},children:[{type:b,value:t}]},{type:a,tag:g,props:{align:c},children:[{type:b,value:u}]},{type:a,tag:g,props:{align:c},children:[{type:b,value:v}]},{type:a,tag:g,props:{align:c},children:[{type:b,value:R}]}]}]},{type:a,tag:q,props:{},children:[{type:a,tag:h,props:{},children:[{type:a,tag:d,props:{align:c},children:[{type:a,tag:e,props:{},children:[{type:b,value:S}]}]},{type:a,tag:d,props:{align:c},children:[{type:a,tag:i,props:{href:w},children:[{type:a,tag:e,props:{},children:[{type:b,value:x}]},{type:b,value:T}]}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:U}]},{type:a,tag:d,props:{align:c},children:[]}]}]}]},{type:a,tag:A,props:{":values":V},children:[]}],toc:{title:W,searchDepth:X,depth:X,links:[]}},_type:Y,_id:av,_source:Z,_file:aw,_extension:_},"content-document-driven-page-surround":[{_path:ah,_draft:k,_partial:k,_empty:k,title:$,description:"The files blocks configure the file serving. Can be defined multiple times as long as the base_path is unique.",excerpt:{type:r,children:[{type:a,tag:s,props:{id:aj},children:[{type:b,value:$}]},{type:a,tag:l,props:{},children:[{type:b,value:ak},{type:a,tag:e,props:{},children:[{type:b,value:aj}]},{type:b,value:" blocks configure the file serving. Can be defined multiple times as long as the "},{type:a,tag:e,props:{},children:[{type:b,value:"base_path"}]},{type:b,value:" is unique."}]},{type:a,tag:o,props:{},children:[{type:a,tag:p,props:{},children:[{type:a,tag:h,props:{},children:[{type:a,tag:g,props:{align:c},children:[{type:b,value:t}]},{type:a,tag:g,props:{align:c},children:[{type:b,value:u}]},{type:a,tag:g,props:{align:c},children:[{type:b,value:v}]},{type:a,tag:g,props:{align:c},children:[{type:b,value:bX}]}]}]},{type:a,tag:q,props:{},children:[{type:a,tag:h,props:{},children:[{type:a,tag:d,props:{align:c},children:[{type:a,tag:e,props:{},children:[{type:b,value:aj}]}]},{type:a,tag:d,props:{align:c},children:[{type:a,tag:i,props:{href:"#server-block"},children:[{type:b,value:"Server Block"}]}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:"Optional"}]},{type:a,tag:d,props:{align:c},children:[{type:a,tag:i,props:{href:"#cors-block"},children:[{type:b,value:"CORS Block"}]}]}]}]}]},{type:a,tag:A,props:{":values":"[{\"name\":\"access_control\",\"type\":\"tuple (string)\",\"default\":\"\",\"description\":\"Sets predefined access control for this block context.\"},{\"name\":\"base_path\",\"type\":\"string\",\"default\":\"\",\"description\":\"Configures the path prefix for all requests.\"},{\"name\":\"document_root\",\"type\":\"string\",\"default\":\"\",\"description\":\"Location of the document root (directory).\"},{\"name\":\"error_file\",\"type\":\"string\",\"default\":\"\",\"description\":\"Location of the error file template.\"},{\"name\":\"custom_log_fields\",\"type\":\"object\",\"default\":\"\",\"description\":\"Defines log fields for custom logging.\"}]"},children:[]}]},_type:Y,_id:"content:2.configuration:4.block:files.md",_source:Z,_file:"2.configuration\u002F4.block\u002Ffiles.md",_extension:_},{_path:ai,_draft:k,_partial:k,_empty:k,title:aa,description:"The jwt block lets you configure JSON Web Token access control for your gateway.\nLike all Access Control types, the jwt block is defined in\nthe Definitions Block and can be referenced in all configuration blocks by its\nrequired label.",excerpt:{type:r,children:[{type:a,tag:s,props:{id:y},children:[{type:b,value:aa}]},{type:a,tag:l,props:{},children:[{type:b,value:ak},{type:a,tag:e,props:{},children:[{type:b,value:y}]},{type:b,value:" block lets you configure JSON Web Token access control for your gateway.\nLike all "},{type:a,tag:i,props:{href:"#access-control"},children:[{type:b,value:"Access Control"}]},{type:b,value:" types, the "},{type:a,tag:e,props:{},children:[{type:b,value:y}]},{type:b,value:" block is defined in\nthe "},{type:a,tag:i,props:{href:bY},children:[{type:b,value:bZ}]},{type:b,value:" and can be referenced in all configuration blocks by its\nrequired "},{type:a,tag:"em",props:{},children:[{type:b,value:"label"}]},{type:b,value:B}]},{type:a,tag:l,props:{},children:[{type:b,value:"Since responses from endpoints protected by JWT access controls are not publicly cacheable, a "},{type:a,tag:e,props:{},children:[{type:b,value:"Cache-Control: private"}]},{type:b,value:" header field is added to the response, unless this feature is disabled with "},{type:a,tag:e,props:{},children:[{type:b,value:"disable_private_caching = true"}]},{type:b,value:B}]},{type:a,tag:o,props:{},children:[{type:a,tag:p,props:{},children:[{type:a,tag:h,props:{},children:[{type:a,tag:g,props:{align:c},children:[{type:b,value:t}]},{type:a,tag:g,props:{align:c},children:[{type:b,value:u}]},{type:a,tag:g,props:{align:c},children:[{type:b,value:v}]},{type:a,tag:g,props:{align:c},children:[{type:b,value:bX}]}]}]},{type:a,tag:q,props:{},children:[{type:a,tag:h,props:{},children:[{type:a,tag:d,props:{align:c},children:[{type:a,tag:e,props:{},children:[{type:b,value:y}]}]},{type:a,tag:d,props:{align:c},children:[{type:a,tag:i,props:{href:bY},children:[{type:b,value:bZ}]}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:"⚠ required"}]},{type:a,tag:d,props:{align:c},children:[{type:a,tag:i,props:{href:w},children:[{type:b,value:"JWKS "},{type:a,tag:e,props:{},children:[{type:b,value:x}]}]},{type:b,value:m},{type:a,tag:i,props:{href:"#error-handler-block"},children:[{type:b,value:"Error Handler Block(s)"}]}]}]}]}]},{type:a,tag:o,props:{},children:[{type:a,tag:p,props:{},children:[{type:a,tag:h,props:{},children:[{type:a,tag:g,props:{align:c},children:[{type:b,value:b_}]},{type:a,tag:g,props:{align:c},children:[{type:b,value:b$}]},{type:a,tag:g,props:{align:c},children:[{type:b,value:ca}]},{type:a,tag:g,props:{align:c},children:[{type:b,value:cb}]},{type:a,tag:g,props:{align:c},children:[{type:b,value:cc}]},{type:a,tag:g,props:{align:c},children:[{type:b,value:cd}]}]}]},{type:a,tag:q,props:{},children:[{type:a,tag:h,props:{},children:[{type:a,tag:d,props:{align:c},children:[{type:a,tag:e,props:{},children:[{type:b,value:ac}]}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:j}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:f}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:"Read token value from a cookie."}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:ce},{type:a,tag:e,props:{},children:[{type:b,value:ad}]},{type:b,value:C},{type:a,tag:e,props:{},children:[{type:b,value:ae}]}]},{type:a,tag:d,props:{align:c},children:[{type:a,tag:e,props:{},children:[{type:b,value:"cookie = \"AccessToken\""}]}]}]},{type:a,tag:h,props:{},children:[{type:a,tag:d,props:{align:c},children:[{type:a,tag:e,props:{},children:[{type:b,value:"custom_log_fields"}]}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:cf}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:f}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:"Defines log fields for "},{type:a,tag:i,props:{href:"LOGS.md#custom-logging"},children:[{type:b,value:"Custom Logging"}]},{type:b,value:B}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:"⚠ Inherited by nested blocks."}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:f}]}]},{type:a,tag:h,props:{},children:[{type:a,tag:d,props:{align:c},children:[{type:a,tag:e,props:{},children:[{type:b,value:ad}]}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:j}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:f}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:"Read token value from a request header field."}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:"⚠ Implies "},{type:a,tag:e,props:{},children:[{type:b,value:"Bearer"}]},{type:b,value:" if "},{type:a,tag:e,props:{},children:[{type:b,value:cg}]},{type:b,value:" (case-insensitive) is used, otherwise any other header name can be used. Cannot be used together with "},{type:a,tag:e,props:{},children:[{type:b,value:ac}]},{type:b,value:C},{type:a,tag:e,props:{},children:[{type:b,value:ae}]},{type:b,value:B}]},{type:a,tag:d,props:{align:c},children:[{type:a,tag:e,props:{},children:[{type:b,value:ch}]}]}]},{type:a,tag:h,props:{},children:[{type:a,tag:d,props:{align:c},children:[{type:a,tag:e,props:{},children:[{type:b,value:ae}]}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:j}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:f}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:"expression to obtain the token"}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:ce},{type:a,tag:e,props:{},children:[{type:b,value:ac}]},{type:b,value:C},{type:a,tag:e,props:{},children:[{type:b,value:ad}]}]},{type:a,tag:d,props:{align:c},children:[{type:a,tag:e,props:{},children:[{type:b,value:"token_value = request.form_body.token[0]"}]}]}]},{type:a,tag:h,props:{},children:[{type:a,tag:d,props:{align:c},children:[{type:a,tag:e,props:{},children:[{type:b,value:af}]}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:j}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:f}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:"Public key (in PEM format) for "},{type:a,tag:e,props:{},children:[{type:b,value:al}]},{type:b,value:ag},{type:a,tag:e,props:{},children:[{type:b,value:am}]},{type:b,value:" variants or the secret for "},{type:a,tag:e,props:{},children:[{type:b,value:ci}]},{type:b,value:" algorithm."}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:f}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:f}]}]},{type:a,tag:h,props:{},children:[{type:a,tag:d,props:{align:c},children:[{type:a,tag:e,props:{},children:[{type:b,value:an}]}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:j}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:f}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:cj},{type:a,tag:e,props:{},children:[{type:b,value:af}]},{type:b,value:ck}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:f}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:f}]}]},{type:a,tag:h,props:{},children:[{type:a,tag:d,props:{align:c},children:[{type:a,tag:e,props:{},children:[{type:b,value:cl}]}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:j}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:f}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:f}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:"Valid values: "},{type:a,tag:e,props:{},children:[{type:b,value:"\"RS256\""}]},{type:b,value:m},{type:a,tag:e,props:{},children:[{type:b,value:"\"RS384\""}]},{type:b,value:m},{type:a,tag:e,props:{},children:[{type:b,value:"\"RS512\""}]},{type:b,value:m},{type:a,tag:e,props:{},children:[{type:b,value:"\"HS256\""}]},{type:b,value:m},{type:a,tag:e,props:{},children:[{type:b,value:"\"HS384\""}]},{type:b,value:m},{type:a,tag:e,props:{},children:[{type:b,value:"\"HS512\""}]},{type:b,value:m},{type:a,tag:e,props:{},children:[{type:b,value:"\"ES256\""}]},{type:b,value:m},{type:a,tag:e,props:{},children:[{type:b,value:"\"ES384\""}]},{type:b,value:m},{type:a,tag:e,props:{},children:[{type:b,value:"\"ES512\""}]}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:f}]}]},{type:a,tag:h,props:{},children:[{type:a,tag:d,props:{align:c},children:[{type:a,tag:e,props:{},children:[{type:b,value:"claims"}]}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:cf}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:f}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:"Object with claims that must be given for a valid token (equals comparison with JWT payload)."}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:"The claim values are evaluated per request."}]},{type:a,tag:d,props:{align:c},children:[{type:a,tag:e,props:{},children:[{type:b,value:"claims = { pid = request.path_params.pid }"}]}]}]},{type:a,tag:h,props:{},children:[{type:a,tag:d,props:{align:c},children:[{type:a,tag:e,props:{},children:[{type:b,value:"required_claims"}]}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:j}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:f}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:"List of claim names that must be given for a valid token"}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:f}]},{type:a,tag:d,props:{align:c},children:[{type:a,tag:e,props:{},children:[{type:b,value:"required_claims = [\"roles\"]"}]}]}]},{type:a,tag:h,props:{},children:[{type:a,tag:d,props:{align:c},children:[{type:a,tag:e,props:{},children:[{type:b,value:ao}]}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:j}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:f}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:"name of claim containing the granted permissions"}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:"The claim value must either be a string containing a space-separated list of permissions or a list of string permissions"}]},{type:a,tag:d,props:{align:c},children:[{type:a,tag:e,props:{},children:[{type:b,value:"beta_permissions_claim = \"scope\""}]}]}]},{type:a,tag:h,props:{},children:[{type:a,tag:d,props:{align:c},children:[{type:a,tag:e,props:{},children:[{type:b,value:"beta_permissions_map"}]}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:cm}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:f}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:"mapping of granted permissions to additional granted permissions"}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:"Maps values from "},{type:a,tag:e,props:{},children:[{type:b,value:ao}]},{type:b,value:" and those created from "},{type:a,tag:e,props:{},children:[{type:b,value:ap}]},{type:b,value:". The map is called recursively."}]},{type:a,tag:d,props:{align:c},children:[{type:a,tag:e,props:{},children:[{type:b,value:"beta_permissions_map = { p1 = [\"p3\", \"p4\"], p2 = [\"p5\"] }"}]}]}]},{type:a,tag:h,props:{},children:[{type:a,tag:d,props:{align:c},children:[{type:a,tag:e,props:{},children:[{type:b,value:cn}]}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:j}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:f}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:"name of claim specifying the roles of the user represented by the token"}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:"The claim value must either be a string containing a space-separated list of role values or a list of string role values"}]},{type:a,tag:d,props:{align:c},children:[{type:a,tag:e,props:{},children:[{type:b,value:"beta_roles_claim = \"roles\""}]}]}]},{type:a,tag:h,props:{},children:[{type:a,tag:d,props:{align:c},children:[{type:a,tag:e,props:{},children:[{type:b,value:ap}]}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:cm}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:f}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:"mapping of roles to granted permissions"}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:"Non-mapped roles can be assigned with "},{type:a,tag:e,props:{},children:[{type:b,value:"*"}]},{type:b,value:" to specific permissions."}]},{type:a,tag:d,props:{align:c},children:[{type:a,tag:e,props:{},children:[{type:b,value:"beta_roles_map = { role1 = [\"p1\", \"p2\"], role2 = [\"p3\"], \"*\" = [\"public\"] }"}]}]}]},{type:a,tag:h,props:{},children:[{type:a,tag:d,props:{align:c},children:[{type:a,tag:e,props:{},children:[{type:b,value:co}]}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:j}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:f}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:"URI pointing to a set of "},{type:a,tag:i,props:{href:"https:\u002F\u002Fdatatracker.ietf.org\u002Fdoc\u002Fhtml\u002Frfc7517",rel:["nofollow","noopener","noreferrer"],target:"_blank"},children:[{type:b,value:"JSON Web Keys (RFC 7517)"}]}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:f}]},{type:a,tag:d,props:{align:c},children:[{type:a,tag:e,props:{},children:[{type:b,value:"jwks_url = \"http:\u002F\u002Fidentityprovider:8080\u002Fjwks.json\""}]}]}]},{type:a,tag:h,props:{},children:[{type:a,tag:d,props:{align:c},children:[{type:a,tag:e,props:{},children:[{type:b,value:"jwks_ttl"}]}]},{type:a,tag:d,props:{align:c},children:[{type:a,tag:i,props:{href:aq},children:[{type:b,value:ar}]}]},{type:a,tag:d,props:{align:c},children:[{type:a,tag:e,props:{},children:[{type:b,value:cp}]}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:"Time period the JWK set stays valid and may be cached."}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:f}]},{type:a,tag:d,props:{align:c},children:[{type:a,tag:e,props:{},children:[{type:b,value:"jwks_ttl = \"1800s\""}]}]}]},{type:a,tag:h,props:{},children:[{type:a,tag:d,props:{align:c},children:[{type:a,tag:e,props:{},children:[{type:b,value:"jwks_max_stale"}]}]},{type:a,tag:d,props:{align:c},children:[{type:a,tag:i,props:{href:aq},children:[{type:b,value:ar}]}]},{type:a,tag:d,props:{align:c},children:[{type:a,tag:e,props:{},children:[{type:b,value:cp}]}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:"Time period the cached JWK set stays valid after its TTL has passed."}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:f}]},{type:a,tag:d,props:{align:c},children:[{type:a,tag:e,props:{},children:[{type:b,value:"jwks_max_stale = \"45m\""}]}]}]},{type:a,tag:h,props:{},children:[{type:a,tag:d,props:{align:c},children:[{type:a,tag:e,props:{},children:[{type:b,value:x}]}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:j}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:f}]},{type:a,tag:d,props:{align:c},children:[{type:a,tag:i,props:{href:w},children:[{type:b,value:"backend reference"}]},{type:b,value:" for enhancing JWKS requests"}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:f}]},{type:a,tag:d,props:{align:c},children:[{type:a,tag:e,props:{},children:[{type:b,value:"backend = \"jwks_backend\""}]}]}]},{type:a,tag:h,props:{},children:[{type:a,tag:d,props:{align:c},children:[{type:a,tag:e,props:{},children:[{type:b,value:"disable_private_caching"}]}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:"bool"}]},{type:a,tag:d,props:{align:c},children:[{type:a,tag:e,props:{},children:[{type:b,value:"false"}]}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:"If set to "},{type:a,tag:e,props:{},children:[{type:b,value:"true"}]},{type:b,value:", Couper does not add the "},{type:a,tag:e,props:{},children:[{type:b,value:"private"}]},{type:b,value:" directive to the "},{type:a,tag:e,props:{},children:[{type:b,value:"Cache-Control"}]},{type:b,value:" HTTP header field value."}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:f}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:f}]}]}]}]},{type:a,tag:l,props:{},children:[{type:b,value:"The attributes "},{type:a,tag:e,props:{},children:[{type:b,value:ad}]},{type:b,value:m},{type:a,tag:e,props:{},children:[{type:b,value:ac}]},{type:b,value:ag},{type:a,tag:e,props:{},children:[{type:b,value:ae}]},{type:b,value:" are mutually exclusive.\nIf all three attributes are missing, "},{type:a,tag:e,props:{},children:[{type:b,value:ch}]},{type:b,value:" will be implied, i.e. the token will be read from the incoming "},{type:a,tag:e,props:{},children:[{type:b,value:cg}]},{type:b,value:cq}]},{type:a,tag:l,props:{},children:[{type:b,value:"If the key to verify the signatures of tokens does not change over time, it should be specified via either "},{type:a,tag:e,props:{},children:[{type:b,value:af}]},{type:b,value:C},{type:a,tag:e,props:{},children:[{type:b,value:an}]},{type:b,value:" (together with "},{type:a,tag:e,props:{},children:[{type:b,value:cl}]},{type:b,value:").\nOtherwise, a JSON web key set should be referenced via "},{type:a,tag:e,props:{},children:[{type:b,value:co}]},{type:b,value:"; in this case, the tokens need a "},{type:a,tag:e,props:{},children:[{type:b,value:"kid"}]},{type:b,value:cq}]},{type:a,tag:l,props:{},children:[{type:b,value:"A JWT access control configured by this block can extract permissions from"}]},{type:a,tag:"ul",props:{},children:[{type:a,tag:cr,props:{},children:[{type:b,value:"the value of the claim specified by "},{type:a,tag:e,props:{},children:[{type:b,value:ao}]},{type:b,value:" and"}]},{type:a,tag:cr,props:{},children:[{type:b,value:"the result of mapping the value of the claim specified by "},{type:a,tag:e,props:{},children:[{type:b,value:cn}]},{type:b,value:" using the "},{type:a,tag:e,props:{},children:[{type:b,value:ap}]},{type:b,value:B}]}]},{type:a,tag:l,props:{},children:[{type:b,value:ak},{type:a,tag:e,props:{},children:[{type:b,value:y}]},{type:b,value:" block may also be referenced by the "},{type:a,tag:i,props:{href:"#functions"},children:[{type:a,tag:e,props:{},children:[{type:b,value:"jwt_sign()"}]},{type:b,value:" function"}]},{type:b,value:", if it has a "},{type:a,tag:e,props:{},children:[{type:b,value:as}]},{type:b,value:" defined. For "},{type:a,tag:e,props:{},children:[{type:b,value:ci}]},{type:b,value:" algorithms the signing key is taken from "},{type:a,tag:e,props:{},children:[{type:b,value:af}]},{type:b,value:ab},{type:a,tag:e,props:{},children:[{type:b,value:an}]},{type:b,value:", for "},{type:a,tag:e,props:{},children:[{type:b,value:al}]},{type:b,value:ag},{type:a,tag:e,props:{},children:[{type:b,value:am}]},{type:b,value:" algorithms, "},{type:a,tag:e,props:{},children:[{type:b,value:at}]},{type:b,value:C},{type:a,tag:e,props:{},children:[{type:b,value:cs}]},{type:b,value:" have to be specified."}]},{type:a,tag:l,props:{},children:[{type:a,tag:"strong",props:{},children:[{type:b,value:"Note:"}]},{type:b,value:" A "},{type:a,tag:e,props:{},children:[{type:b,value:y}]},{type:b,value:" block with "},{type:a,tag:e,props:{},children:[{type:b,value:as}]},{type:b,value:" cannot have the same label as a "},{type:a,tag:e,props:{},children:[{type:b,value:"jwt_signing_profile"}]},{type:b,value:" block."}]},{type:a,tag:o,props:{},children:[{type:a,tag:p,props:{},children:[{type:a,tag:h,props:{},children:[{type:a,tag:g,props:{align:c},children:[{type:b,value:b_}]},{type:a,tag:g,props:{align:c},children:[{type:b,value:b$}]},{type:a,tag:g,props:{align:c},children:[{type:b,value:ca}]},{type:a,tag:g,props:{align:c},children:[{type:b,value:cb}]},{type:a,tag:g,props:{align:c},children:[{type:b,value:cc}]},{type:a,tag:g,props:{align:c},children:[{type:b,value:cd}]}]}]},{type:a,tag:q,props:{},children:[{type:a,tag:h,props:{},children:[{type:a,tag:d,props:{align:c},children:[{type:a,tag:e,props:{},children:[{type:b,value:at}]}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:j}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:f}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:"Private key (in PEM format) for "},{type:a,tag:e,props:{},children:[{type:b,value:al}]},{type:b,value:ag},{type:a,tag:e,props:{},children:[{type:b,value:am}]},{type:b,value:" variants."}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:f}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:f}]}]},{type:a,tag:h,props:{},children:[{type:a,tag:d,props:{align:c},children:[{type:a,tag:e,props:{},children:[{type:b,value:cs}]}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:j}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:f}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:cj},{type:a,tag:e,props:{},children:[{type:b,value:at}]},{type:b,value:ck}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:f}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:f}]}]},{type:a,tag:h,props:{},children:[{type:a,tag:d,props:{align:c},children:[{type:a,tag:e,props:{},children:[{type:b,value:as}]}]},{type:a,tag:d,props:{align:c},children:[{type:a,tag:i,props:{href:aq},children:[{type:b,value:ar}]}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:f}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:"The token's time-to-live (creates the "},{type:a,tag:e,props:{},children:[{type:b,value:"exp"}]},{type:b,value:" claim)."}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:f}]},{type:a,tag:d,props:{align:c},children:[{type:b,value:f}]}]}]}]}]},_type:Y,_id:"content:2.configuration:4.block:jwt.md",_source:Z,_file:"2.configuration\u002F4.block\u002Fjwt.md",_extension:_}],"docs-search-result":bW},_errors:{},serverRendered:z,config:{public:{content:{base:"_content",tags:{p:"prose-p",a:"prose-a",blockquote:"prose-blockquote","code-inline":"prose-code-inline",code:"prose-code",em:"prose-em",h1:"prose-h1",h2:"prose-h2",h3:"prose-h3",h4:"prose-h4",h5:"prose-h5",h6:"prose-h6",hr:"prose-hr",img:"prose-img",ul:"prose-ul",ol:"prose-ol",li:"prose-li",strong:"prose-strong",table:"prose-table",thead:"prose-thead",tbody:"prose-tbody",td:"prose-td",th:"prose-th",tr:"prose-tr"},highlight:{theme:"slack-dark",preload:["hcl","html","shell"]},wsUrl:W,documentDriven:{page:z,navigation:z,surround:z,globals:{},layoutFallbacks:["theme"],injectPage:z}},algolia:{apiKey:"5551c3e4dfb61914988abf95fd9b762f",applicationId:"MSIN2HU7WH",lite:z,instantSearch:{theme:"algolia"},docSearch:{}}},app:{baseURL:ab,buildAssetsDir:"\u002F_nuxt\u002F",cdnURL:W}}}}("element","text","left","td","code-inline","-","th","tr","a","string",false,"p",", ","Health","table","thead","tbody","root","h1","Block name","Context","Label","#backend-block","backend","jwt",true,"attributes","."," or ","\u002Fconfiguration\u002Fblock\u002Fhealth","health","Defines a recurring health check request for its backend. Results can be obtained via the ","#backends","backends.\u003Clabel\u003E.health"," variables",".\nChanges in health states and related requests will be logged. Default User-Agent will be ","Couper \u002F \u003Cversion\u003E health-check"," if not provided\nvia ","headers"," attribute. An unhealthy backend will return with a ","ERRORS.md#api-error-types","backend_unhealthy"," error.","Nested block","beta_health"," block","–","[{\"name\":\"failure_threshold\",\"type\":\"number\",\"default\":\"2\",\"description\":\"failed checks needed to consider backend unhealthy\"},{\"name\":\"interval\",\"type\":\"string\",\"default\":\"1s\",\"description\":\"time interval for recheck\"},{\"name\":\"timeout\",\"type\":\"string\",\"default\":\"2s\",\"description\":\"maximum allowed time limit which is\\tbounded by \u003Ccode\u003Einterval\u003C\u002Fcode\u003E\"},{\"name\":\"path\",\"type\":\"string\",\"default\":\"\",\"description\":\"URL path with query on backend host\"},{\"name\":\"expected_status\",\"type\":\"tuple (int)\",\"default\":\"[200, 204, 301]\",\"description\":\"one of wanted response status code\"},{\"name\":\"expected_text\",\"type\":\"string\",\"default\":\"\",\"description\":\"text which the response body must contain\"},{\"name\":\"headers\",\"type\":\"object\",\"default\":\"\",\"description\":\"request headers\"}]","",2,"markdown","content","md","Files","JWT","\u002F","cookie","header","token_value","key"," and ","\u002Fconfiguration\u002Fblock\u002Ffiles","\u002Fconfiguration\u002Fblock\u002Fjwt","files","The ","RS*","ES*","key_file","beta_permissions_claim","beta_roles_map","#duration","duration","signing_ttl","signing_key","Defines a recurring health check request for its backend. Results can be obtained via the backends.\u003Clabel\u003E.health variables.\nChanges in health states and related requests will be logged. Default User-Agent will be Couper \u002F \u003Cversion\u003E health-check if not provided\nvia headers attribute. An unhealthy backend will return with a backend_unhealthy error.","content:2.configuration:4.block:health.md","2.configuration\u002F4.block\u002Fhealth.md","Getting Started","\u002Fgetting-started","Introduction","\u002Fgetting-started\u002Fintroduction","Running Couper","\u002Fgetting-started\u002Frunning-couper","Examples","\u002Fgetting-started\u002Fexamples","About beta features","\u002Fgetting-started\u002Fbeta-features","Configuration","\u002Fconfiguration","Command Line Interface","\u002Fconfiguration\u002Fcommand-line","Configuration File","\u002Fconfiguration\u002Fconfiguration-file","Expressions","\u002Fconfiguration\u002Fexpressions","Modifiers","\u002Fconfiguration\u002Fmodifiers","Block","\u002Fconfiguration\u002Fblock","Api","\u002Fconfiguration\u002Fblock\u002Fapi","Backend","\u002Fconfiguration\u002Fblock\u002Fbackend","Basic Auth","\u002Fconfiguration\u002Fblock\u002Fbasic_auth","Cors","\u002Fconfiguration\u002Fblock\u002Fcors","Defaults","\u002Fconfiguration\u002Fblock\u002Fdefaults","Definitions","\u002Fconfiguration\u002Fblock\u002Fdefinitions","Endpoint","\u002Fconfiguration\u002Fblock\u002Fendpoint","Environment","\u002Fconfiguration\u002Fblock\u002Fenvironment","JWT Signing Profile","\u002Fconfiguration\u002Fblock\u002Fjwtsigning_profile","OAuth2 AC (Beta)","\u002Fconfiguration\u002Fblock\u002Foauth2ac","OAuth2","\u002Fconfiguration\u002Fblock\u002Foauth2req_auth","Oidc","\u002Fconfiguration\u002Fblock\u002Foidc","OpenAPI","\u002Fconfiguration\u002Fblock\u002Fopen_api","Proxy","\u002Fconfiguration\u002Fblock\u002Fproxy","Request","\u002Fconfiguration\u002Fblock\u002Frequest","Response","\u002Fconfiguration\u002Fblock\u002Fresponse","SAML","\u002Fconfiguration\u002Fblock\u002Fsaml","Server","\u002Fconfiguration\u002Fblock\u002Fserver","Settings","\u002Fconfiguration\u002Fblock\u002Fsettings","SPA","\u002Fconfiguration\u002Fblock\u002Fspa","Websockets","\u002Fconfiguration\u002Fblock\u002Fwebsockets","Variables","\u002Fconfiguration\u002Fvariables","Functions","\u002Fconfiguration\u002Ffunctions","Errors","\u002Fconfiguration\u002Ferror-handling","Merging","\u002Fconfiguration\u002Fmultiple-files","Observation","\u002Fobservation","Logging","\u002Fobservation\u002Flogging","Metrics","\u002Fobservation\u002Fmetrics","Couper Documentation",null,"Nested block(s)","#definitions-block","Definitions Block","Attribute(s)","Type","Default","Description","Characteristic(s)","Example","cannot be used together with ","object","Authorization","header = \"Authorization\"","HS*","Optional file reference instead of "," usage.","signature_algorithm","object (string)","beta_roles_claim","jwks_url","\"1h\""," header.","li","signing_key_file"))</script><script type="module" src="/_nuxt/entry-43b25c15.mjs" crossorigin></script><script type="module" src="/_nuxt/default-63e7bf38.mjs" crossorigin></script><script type="module" src="/_nuxt/Logo-d5b51ac1.mjs" crossorigin></script><script type="module" src="/_nuxt/_...slug_-b71647c9.mjs" crossorigin></script><script type="module" src="/_nuxt/ProseH1-f3faf32d.mjs" crossorigin></script><script type="module" src="/_nuxt/ProseP-7b981514.mjs" crossorigin></script><script type="module" src="/_nuxt/ProseA-03f85eac.mjs" crossorigin></script><script type="module" src="/_nuxt/ProseCodeInline-0af654ef.mjs" crossorigin></script><script type="module" src="/_nuxt/ProseTable-4cc72f65.mjs" crossorigin></script><script type="module" src="/_nuxt/ProseThead-726bca02.mjs" crossorigin></script><script type="module" src="/_nuxt/ProseTr-9416f218.mjs" crossorigin></script><script type="module" src="/_nuxt/ProseTh-3d5493aa.mjs" crossorigin></script><script type="module" src="/_nuxt/ProseTbody-f73c86f8.mjs" crossorigin></script><script type="module" src="/_nuxt/ProseTd-557c3c5d.mjs" crossorigin></script><script type="module" src="/_nuxt/Attributes-592f0525.mjs" crossorigin></script>
</body>

</html>