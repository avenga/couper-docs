[{"_path":"/configuration/block/jwt","_draft":false,"_partial":false,"_empty":false,"title":"JWT","description":"The jwt block lets you configure JSON Web Token access control for your gateway.\nLike all Access Control types, the jwt block is defined in\nthe Definitions Block and can be referenced in all configuration blocks by its\nrequired label.","excerpt":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"jwt"},"children":[{"type":"text","value":"JWT"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"jwt"}]},{"type":"text","value":" block lets you configure JSON Web Token access control for your gateway.\nLike all "},{"type":"element","tag":"a","props":{"href":"#access-control"},"children":[{"type":"text","value":"Access Control"}]},{"type":"text","value":" types, the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"jwt"}]},{"type":"text","value":" block is defined in\nthe "},{"type":"element","tag":"a","props":{"href":"#definitions-block"},"children":[{"type":"text","value":"Definitions Block"}]},{"type":"text","value":" and can be referenced in all configuration blocks by its\nrequired "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"label"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Since responses from endpoints protected by JWT access controls are not publicly cacheable, a "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Cache-Control: private"}]},{"type":"text","value":" header field is added to the response, unless this feature is disabled with "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"disable_private_caching = true"}]},{"type":"text","value":"."}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Block name"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Context"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Label"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Nested block(s)"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"jwt"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"#definitions-block"},"children":[{"type":"text","value":"Definitions Block"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"⚠ required"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"#backend-block"},"children":[{"type":"text","value":"JWKS "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"backend"}]}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"#error-handler-block"},"children":[{"type":"text","value":"Error Handler Block(s)"}]}]}]}]}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Attribute(s)"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Type"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Default"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Description"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Characteristic(s)"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Example"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"cookie"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Read token value from a cookie."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"cannot be used together with "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"header"}]},{"type":"text","value":" or "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"token_value"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"cookie = \"AccessToken\""}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"custom_log_fields"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"object"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Defines log fields for "},{"type":"element","tag":"a","props":{"href":"LOGS.md#custom-logging"},"children":[{"type":"text","value":"Custom Logging"}]},{"type":"text","value":"."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"⚠ Inherited by nested blocks."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"header"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Read token value from a request header field."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"⚠ Implies "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Bearer"}]},{"type":"text","value":" if "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Authorization"}]},{"type":"text","value":" (case-insensitive) is used, otherwise any other header name can be used. Cannot be used together with "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"cookie"}]},{"type":"text","value":" or "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"token_value"}]},{"type":"text","value":"."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"header = \"Authorization\""}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"token_value"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"expression to obtain the token"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"cannot be used together with "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"cookie"}]},{"type":"text","value":" or "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"header"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"token_value = request.form_body.token[0]"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"key"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Public key (in PEM format) for "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"RS*"}]},{"type":"text","value":" and "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ES*"}]},{"type":"text","value":" variants or the secret for "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"HS*"}]},{"type":"text","value":" algorithm."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"key_file"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Optional file reference instead of "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"key"}]},{"type":"text","value":" usage."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"signature_algorithm"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Valid values: "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"\"RS256\""}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"\"RS384\""}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"\"RS512\""}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"\"HS256\""}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"\"HS384\""}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"\"HS512\""}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"\"ES256\""}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"\"ES384\""}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"\"ES512\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"claims"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"object"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Object with claims that must be given for a valid token (equals comparison with JWT payload)."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"The claim values are evaluated per request."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"claims = { pid = request.path_params.pid }"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"required_claims"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"List of claim names that must be given for a valid token"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"required_claims = [\"roles\"]"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"beta_permissions_claim"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"name of claim containing the granted permissions"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"The claim value must either be a string containing a space-separated list of permissions or a list of string permissions"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"beta_permissions_claim = \"scope\""}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"beta_permissions_map"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"object (string)"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"mapping of granted permissions to additional granted permissions"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Maps values from "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"beta_permissions_claim"}]},{"type":"text","value":" and those created from "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"beta_roles_map"}]},{"type":"text","value":". The map is called recursively."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"beta_permissions_map = { p1 = [\"p3\", \"p4\"], p2 = [\"p5\"] }"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"beta_roles_claim"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"name of claim specifying the roles of the user represented by the token"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"The claim value must either be a string containing a space-separated list of role values or a list of string role values"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"beta_roles_claim = \"roles\""}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"beta_roles_map"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"object (string)"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"mapping of roles to granted permissions"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Non-mapped roles can be assigned with "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"*"}]},{"type":"text","value":" to specific permissions."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"beta_roles_map = { role1 = [\"p1\", \"p2\"], role2 = [\"p3\"], \"*\" = [\"public\"] }"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"jwks_url"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"URI pointing to a set of "},{"type":"element","tag":"a","props":{"href":"https://datatracker.ietf.org/doc/html/rfc7517","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"text","value":"JSON Web Keys (RFC 7517)"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"jwks_url = \"http://identityprovider:8080/jwks.json\""}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"jwks_ttl"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"#duration"},"children":[{"type":"text","value":"duration"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"\"1h\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Time period the JWK set stays valid and may be cached."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"jwks_ttl = \"1800s\""}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"jwks_max_stale"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"#duration"},"children":[{"type":"text","value":"duration"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"\"1h\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Time period the cached JWK set stays valid after its TTL has passed."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"jwks_max_stale = \"45m\""}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"backend"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"#backend-block"},"children":[{"type":"text","value":"backend reference"}]},{"type":"text","value":" for enhancing JWKS requests"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"backend = \"jwks_backend\""}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"disable_private_caching"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"bool"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"false"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"If set to "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"true"}]},{"type":"text","value":", Couper does not add the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"private"}]},{"type":"text","value":" directive to the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Cache-Control"}]},{"type":"text","value":" HTTP header field value."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The attributes "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"header"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"cookie"}]},{"type":"text","value":" and "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"token_value"}]},{"type":"text","value":" are mutually exclusive.\nIf all three attributes are missing, "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"header = \"Authorization\""}]},{"type":"text","value":" will be implied, i.e. the token will be read from the incoming "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Authorization"}]},{"type":"text","value":" header."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If the key to verify the signatures of tokens does not change over time, it should be specified via either "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"key"}]},{"type":"text","value":" or "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"key_file"}]},{"type":"text","value":" (together with "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"signature_algorithm"}]},{"type":"text","value":").\nOtherwise, a JSON web key set should be referenced via "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"jwks_url"}]},{"type":"text","value":"; in this case, the tokens need a "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"kid"}]},{"type":"text","value":" header."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A JWT access control configured by this block can extract permissions from"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"the value of the claim specified by "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"beta_permissions_claim"}]},{"type":"text","value":" and"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"the result of mapping the value of the claim specified by "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"beta_roles_claim"}]},{"type":"text","value":" using the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"beta_roles_map"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"jwt"}]},{"type":"text","value":" block may also be referenced by the "},{"type":"element","tag":"a","props":{"href":"#functions"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"jwt_sign()"}]},{"type":"text","value":" function"}]},{"type":"text","value":", if it has a "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"signing_ttl"}]},{"type":"text","value":" defined. For "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"HS*"}]},{"type":"text","value":" algorithms the signing key is taken from "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"key"}]},{"type":"text","value":"/"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"key_file"}]},{"type":"text","value":", for "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"RS*"}]},{"type":"text","value":" and "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ES*"}]},{"type":"text","value":" algorithms, "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"signing_key"}]},{"type":"text","value":" or "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"signing_key_file"}]},{"type":"text","value":" have to be specified."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Note:"}]},{"type":"text","value":" A "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"jwt"}]},{"type":"text","value":" block with "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"signing_ttl"}]},{"type":"text","value":" cannot have the same label as a "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"jwt_signing_profile"}]},{"type":"text","value":" block."}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Attribute(s)"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Type"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Default"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Description"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Characteristic(s)"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Example"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"signing_key"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Private key (in PEM format) for "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"RS*"}]},{"type":"text","value":" and "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ES*"}]},{"type":"text","value":" variants."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"signing_key_file"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Optional file reference instead of "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"signing_key"}]},{"type":"text","value":" usage."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"signing_ttl"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"#duration"},"children":[{"type":"text","value":"duration"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"The token's time-to-live (creates the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"exp"}]},{"type":"text","value":" claim)."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]}]}]}]}]},"_type":"markdown","_id":"content:2.configuration:4.block:jwt.md","_source":"content","_file":"2.configuration/4.block/jwt.md","_extension":"md"},{"_path":"/configuration/block/oauth2ac","_draft":false,"_partial":false,"_empty":false,"title":"OAuth2 AC (Beta)","description":"The beta_oauth2 block lets you configure the oauth2_authorization_url() function and an access\ncontrol for an OAuth2 Authorization Code Grant Flow redirect endpoint.\nLike all Access Control types, the beta_oauth2 block is defined in the Definitions Block and can be referenced in all configuration blocks by its required label.","excerpt":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"oauth2-ac-beta"},"children":[{"type":"text","value":"OAuth2 AC (Beta)"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"beta_oauth2"}]},{"type":"text","value":" block lets you configure the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"oauth2_authorization_url()"}]},{"type":"text","value":" "},{"type":"element","tag":"a","props":{"href":"#functions"},"children":[{"type":"text","value":"function"}]},{"type":"text","value":" and an access\ncontrol for an OAuth2 "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Authorization Code Grant Flow"}]},{"type":"text","value":" redirect endpoint.\nLike all "},{"type":"element","tag":"a","props":{"href":"#access-control"},"children":[{"type":"text","value":"Access Control"}]},{"type":"text","value":" types, the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"beta_oauth2"}]},{"type":"text","value":" block is defined in the "},{"type":"element","tag":"a","props":{"href":"#definitions-block"},"children":[{"type":"text","value":"Definitions Block"}]},{"type":"text","value":" and can be referenced in all configuration blocks by its required "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"label"}]},{"type":"text","value":"."}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Block name"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Context"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Label"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Nested block(s)"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"beta_oauth2"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"#definitions-block"},"children":[{"type":"text","value":"Definitions Block"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"⚠ required"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"#backend-block"},"children":[{"type":"text","value":"Backend Block"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"#error-handler-block"},"children":[{"type":"text","value":"Error Handler Block"}]}]}]}]}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Attribute(s)"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Type"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Default"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Description"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Characteristic(s)"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Example"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"backend"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"#backend-block"},"children":[{"type":"text","value":"Backend Block Reference"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"⚠ Do not disable the peer certificate validation with "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"disable_certificate_validation = true"}]},{"type":"text","value":"!"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"authorization_endpoint"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"The authorization server endpoint URL used for authorization."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"⚠ required"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"token_endpoint"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"The authorization server endpoint URL used for requesting the token."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"⚠ required"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"token_endpoint_auth_method"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"\"client_secret_basic\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Defines the method to authenticate the client at the token endpoint."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"If set to "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"client_secret_post\""}]},{"type":"text","value":", the client credentials are transported in the request body. If set to "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"\"client_secret_basic\""}]},{"type":"text","value":", the client credentials are transported via Basic Authentication."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"redirect_uri"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"The Couper endpoint for receiving the authorization code."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"⚠ required. Relative URL references are resolved against the origin of the current request URL. The origin can be changed with the "},{"type":"element","tag":"a","props":{"href":"#settings-block"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"accept_forwarded_url"}]}]},{"type":"text","value":" attribute if Couper is running behind a proxy."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"grant_type"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"The grant type."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"⚠ required, to be set to: "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"\"authorization_code\""}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"grant_type = \"authorization_code\""}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"client_id"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"The client identifier."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"⚠ required"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"client_secret"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"The client password."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"⚠ required."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"scope"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"A space separated list of requested scope values for the access token."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"scope = \"read write\""}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"verifier_method"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"The method to verify the integrity of the authorization code flow"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"⚠ required, available values: "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"\"ccm_s256\""}]},{"type":"text","value":" ("},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"code_challenge"}]},{"type":"text","value":" parameter with "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"code_challenge_method"}]},{"type":"text","value":" "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"S256"}]},{"type":"text","value":"), "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"\"state\""}]},{"type":"text","value":" ("},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"state"}]},{"type":"text","value":" parameter)"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"verifier_method = \"ccm_s256\""}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"verifier_value"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"string or expression"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"The value of the (unhashed) verifier."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"⚠ required; e.g. using cookie value created with "},{"type":"element","tag":"a","props":{"href":"#functions"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"oauth2_verifier()"}]},{"type":"text","value":" function"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"verifier_value = request.cookies.verifier"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"custom_log_fields"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"object"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Defines log fields for "},{"type":"element","tag":"a","props":{"href":"LOGS.md#custom-logging"},"children":[{"type":"text","value":"Custom Logging"}]},{"type":"text","value":"."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"⚠ Inherited by nested blocks."}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"-"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If the authorization server supports the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"code_challenge_method"}]},{"type":"text","value":" "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"S256"}]},{"type":"text","value":" (a.k.a. PKCE, see RFC 7636), we recommend "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"verifier_method = \"ccm_s256\""}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The HTTP header field "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Accept: application/json"}]},{"type":"text","value":" is automatically added to the token request. This can be modified with "},{"type":"element","tag":"a","props":{"href":"#request-header"},"children":[{"type":"text","value":"request header modifiers"}]},{"type":"text","value":" in a "},{"type":"element","tag":"a","props":{"href":"#backend-block"},"children":[{"type":"text","value":"backend block"}]},{"type":"text","value":"."}]}]},"_type":"markdown","_id":"content:2.configuration:4.block:oauth2ac.md","_source":"content","_file":"2.configuration/4.block/oauth2ac.md","_extension":"md"}]