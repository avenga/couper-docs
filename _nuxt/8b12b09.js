(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{544:function(t,e,r){"use strict";r.r(e);var n,l=r(94),d=r.n(l),o=r(161),m=r(261),N=["components"],c={};function h(t){var e=t.components,r=Object(o.a)(t,N);return n("wrapper",d()([{},c,{},r,{attrs:{components:e,mdxType:"MDXLayout"}}]),[n("h1",["Errors"]),n("ul",[n("li",{attrs:{parentName:"ul"}},[n("a",d()([{attrs:{parentName:"li"}},{href:"#errors"}]),["Errors"])]),n("li",{attrs:{parentName:"ul"}},[n("a",d()([{attrs:{parentName:"li"}},{href:"#introduction"}]),["Introduction"])]),n("li",{attrs:{parentName:"ul"}},[n("a",d()([{attrs:{parentName:"li"}},{href:"#error-messages"}]),["Error messages"])]),n("li",{attrs:{parentName:"ul"}},[n("a",d()([{attrs:{parentName:"li"}},{href:"#access-control-error_handler"}]),["Access control error_handler"])]),n("li",{attrs:{parentName:"ul"}},[n("a",d()([{attrs:{parentName:"li"}},{href:"#permissions-related-error_handler"}]),["Permissions related error_handler"])]),n("li",{attrs:{parentName:"ul"}},[n("a",d()([{attrs:{parentName:"li"}},{href:"#endpoint-related-error_handler"}]),["Endpoint related error_handler"])]),n("li",{attrs:{parentName:"ul"}},[n("a",d()([{attrs:{parentName:"li"}},{href:"#error-types"}]),["Error types"])]),n("li",{attrs:{parentName:"ul"}},[n("a",d()([{attrs:{parentName:"li"}},{href:"#access-control-error-types"}]),["Access control error types"])]),n("li",{attrs:{parentName:"ul"}},[n("a",d()([{attrs:{parentName:"li"}},{href:"#api-error-types"}]),["API error types"])]),n("li",{attrs:{parentName:"ul"}},[n("a",d()([{attrs:{parentName:"li"}},{href:"#endpoint-error-types"}]),["Endpoint error types"])])]),n("h2",["Introduction"]),n("p",["Errors can occur in various places: due to invalid client requests or problems on the backend and network side.\nCouper specifies some generic error categories (like ",n("inlineCode",{attrs:{parentName:"p"}},["configuration"]),", ",n("inlineCode",{attrs:{parentName:"p"}},["server"]),", ",n("inlineCode",{attrs:{parentName:"p"}},["backend"])," or ",n("inlineCode",{attrs:{parentName:"p"}},["access_control"]),") to help you identify the occurring problems faster."]),n("h2",["Error messages"]),n("p",["Error messages are only sent to the client as a summary.\nDetailed information is provided via log message. This way, all information can be viewed without accidentally revealing confidential information."]),n("h2",["Access control ",n("inlineCode",{attrs:{parentName:"h2"}},["error_handler"])]),n("p",["Access control errors in particular require special handling, e.g. sending a specific response for missing login credentials.\nFor this purpose every access control definition of ",n("inlineCode",{attrs:{parentName:"p"}},["basic_auth"]),", ",n("inlineCode",{attrs:{parentName:"p"}},["jwt"]),", ",n("inlineCode",{attrs:{parentName:"p"}},["oidc"])," or ",n("inlineCode",{attrs:{parentName:"p"}},["saml2"])," can define one or multiple ",n("a",d()([{attrs:{parentName:"p"}},{href:"REFERENCE.md#error-handler-block"}]),[n("inlineCode",{attrs:{parentName:"a"}},["error_handler"])," blocks"])," with one or more defined error type labels listed below."]),n("h2",["Permissions related ",n("inlineCode",{attrs:{parentName:"h2"}},["error_handler"])]),n("p",["Required permissions are configured for ",n("inlineCode",{attrs:{parentName:"p"}},["api"])," or ",n("inlineCode",{attrs:{parentName:"p"}},["endpoint"])," blocks. So errors caused by insufficient permissions can be handled at API or endpoint levels."]),n("h2",["Endpoint related ",n("inlineCode",{attrs:{parentName:"h2"}},["error_handler"])]),n("p",["A ",n("a",d()([{attrs:{parentName:"p"}},{href:"REFERENCE.md#endpoint-sequence"}]),["sequence"]),", a simple ",n("inlineCode",{attrs:{parentName:"p"}},["request"])," or ",n("inlineCode",{attrs:{parentName:"p"}},["proxy"])," error can be handled in combination with the ",n("inlineCode",{attrs:{parentName:"p"}},["expected_status"])," attribute for ",n("inlineCode",{attrs:{parentName:"p"}},["request"]),"\nand ",n("inlineCode",{attrs:{parentName:"p"}},["proxy"])," block definitions and an ",n("a",d()([{attrs:{parentName:"p"}},{href:"REFERENCE.md#error-handler-block"}]),[n("inlineCode",{attrs:{parentName:"a"}},["error_handler"])," block"])," with the ",n("a",d()([{attrs:{parentName:"p"}},{href:"#endpoint-error-types"}]),["related"])," type label."]),n("h2",["Error types"]),n("p",["All errors have a specific type. You can find it in the log field ",n("inlineCode",{attrs:{parentName:"p"}},["error_type"]),". Furthermore, errors can be associated with a list of less specific types. Your error handlers will be evaluated from the most to the least specific one. Only the first matching error handler is executed."]),n("h3",["Access control error types"]),n("p",["The following table documents error types that can be handled in the respective access control blocks (",n("inlineCode",{attrs:{parentName:"p"}},["basic_auth"]),", ",n("inlineCode",{attrs:{parentName:"p"}},["jwt"]),", ",n("inlineCode",{attrs:{parentName:"p"}},["saml"]),", ",n("inlineCode",{attrs:{parentName:"p"}},["beta_oauth2"]),", ",n("inlineCode",{attrs:{parentName:"p"}},["oidc"]),"):"]),n("table",[n("thead",{attrs:{parentName:"table"}},[n("tr",{attrs:{parentName:"thead"}},[n("th",d()([{attrs:{parentName:"tr"}},{align:"left"}]),["Type (and super types)"]),n("th",d()([{attrs:{parentName:"tr"}},{align:"left"}]),["Description"]),n("th",d()([{attrs:{parentName:"tr"}},{align:"left"}]),["Default handling"])])]),n("tbody",{attrs:{parentName:"table"}},[n("tr",{attrs:{parentName:"tbody"}},[n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),[n("inlineCode",{attrs:{parentName:"td"}},["access_control"])]),n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),["Access control related errors"]),n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),["Send error template with status ",n("inlineCode",{attrs:{parentName:"td"}},["403"]),"."])]),n("tr",{attrs:{parentName:"tbody"}},[n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),[n("inlineCode",{attrs:{parentName:"td"}},["basic_auth"])," (",n("inlineCode",{attrs:{parentName:"td"}},["access_control"]),")"]),n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),["All ",n("inlineCode",{attrs:{parentName:"td"}},["basic_auth"])," related errors, e.g. unknown user or wrong password."]),n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),["Send error template with status ",n("inlineCode",{attrs:{parentName:"td"}},["401"])," and ",n("inlineCode",{attrs:{parentName:"td"}},["WWW-Authenticate: Basic"])," header."])]),n("tr",{attrs:{parentName:"tbody"}},[n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),[n("inlineCode",{attrs:{parentName:"td"}},["basic_auth_credentials_missing"])," (",n("inlineCode",{attrs:{parentName:"td"}},["basic_auth"]),")"]),n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),["Client does not provide any credentials."]),n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),["Send error template with status ",n("inlineCode",{attrs:{parentName:"td"}},["401"])," and ",n("inlineCode",{attrs:{parentName:"td"}},["WWW-Authenticate: Basic"])," header."])]),n("tr",{attrs:{parentName:"tbody"}},[n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),[n("inlineCode",{attrs:{parentName:"td"}},["jwt"])," (",n("inlineCode",{attrs:{parentName:"td"}},["access_control"]),")"]),n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),["All ",n("inlineCode",{attrs:{parentName:"td"}},["jwt"])," related errors."]),n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),["Send error template with status ",n("inlineCode",{attrs:{parentName:"td"}},["403"]),"."])]),n("tr",{attrs:{parentName:"tbody"}},[n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),[n("inlineCode",{attrs:{parentName:"td"}},["jwt_token_missing"])," (",n("inlineCode",{attrs:{parentName:"td"}},["jwt"]),")"]),n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),["No token provided with configured token source."]),n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),["Send error template with status ",n("inlineCode",{attrs:{parentName:"td"}},["401"]),"."])]),n("tr",{attrs:{parentName:"tbody"}},[n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),[n("inlineCode",{attrs:{parentName:"td"}},["jwt_token_expired"])," (",n("inlineCode",{attrs:{parentName:"td"}},["jwt"]),")"]),n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),["Given token is valid but expired."]),n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),["Send error template with status ",n("inlineCode",{attrs:{parentName:"td"}},["403"]),"."])]),n("tr",{attrs:{parentName:"tbody"}},[n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),[n("inlineCode",{attrs:{parentName:"td"}},["jwt_token_invalid"])," (",n("inlineCode",{attrs:{parentName:"td"}},["jwt"]),")"]),n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),["The token is syntactically not a JWT, or not sufficient, e.g. because required claims are missing or have unexpected values."]),n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),["Send error template with status ",n("inlineCode",{attrs:{parentName:"td"}},["403"]),"."])]),n("tr",{attrs:{parentName:"tbody"}},[n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),[n("inlineCode",{attrs:{parentName:"td"}},["saml"])," (or ",n("inlineCode",{attrs:{parentName:"td"}},["saml2"]),") (",n("inlineCode",{attrs:{parentName:"td"}},["access_control"]),")"]),n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),["All ",n("inlineCode",{attrs:{parentName:"td"}},["saml"])," related errors"]),n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),["Send error template with status ",n("inlineCode",{attrs:{parentName:"td"}},["403"]),"."])]),n("tr",{attrs:{parentName:"tbody"}},[n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),[n("inlineCode",{attrs:{parentName:"td"}},["oauth2"])," (",n("inlineCode",{attrs:{parentName:"td"}},["access_control"]),")"]),n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),["All ",n("inlineCode",{attrs:{parentName:"td"}},["beta_oauth2"]),"/",n("inlineCode",{attrs:{parentName:"td"}},["oidc"])," related errors"]),n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),["Send error template with status ",n("inlineCode",{attrs:{parentName:"td"}},["403"]),"."])])])]),n("h3",["API error types"]),n("p",["The following table documents error types that can be handled in ",n("inlineCode",{attrs:{parentName:"p"}},["api"])," blocks:"]),n("table",[n("thead",{attrs:{parentName:"table"}},[n("tr",{attrs:{parentName:"thead"}},[n("th",d()([{attrs:{parentName:"tr"}},{align:"left"}]),["Type (and super types)"]),n("th",d()([{attrs:{parentName:"tr"}},{align:"left"}]),["Description"]),n("th",d()([{attrs:{parentName:"tr"}},{align:"left"}]),["Default handling"])])]),n("tbody",{attrs:{parentName:"table"}},[n("tr",{attrs:{parentName:"tbody"}},[n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),[n("inlineCode",{attrs:{parentName:"td"}},["backend"])]),n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),["All catchable backend related errors"]),n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),["Send error template with status ",n("inlineCode",{attrs:{parentName:"td"}},["502"]),"."])]),n("tr",{attrs:{parentName:"tbody"}},[n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),[n("inlineCode",{attrs:{parentName:"td"}},["backend_openapi_validation"])," (",n("inlineCode",{attrs:{parentName:"td"}},["backend"]),")"]),n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),["Backend request or response is invalid"]),n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),["Send error template with status code ",n("inlineCode",{attrs:{parentName:"td"}},["400"])," for invalid backend request or ",n("inlineCode",{attrs:{parentName:"td"}},["502"])," for invalid backend response."])]),n("tr",{attrs:{parentName:"tbody"}},[n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),[n("inlineCode",{attrs:{parentName:"td"}},["backend_timeout"])," (",n("inlineCode",{attrs:{parentName:"td"}},["backend"]),")"]),n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),["A backend request timed out"]),n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),["Send error template with status ",n("inlineCode",{attrs:{parentName:"td"}},["504"]),"."])]),n("tr",{attrs:{parentName:"tbody"}},[n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),[n("inlineCode",{attrs:{parentName:"td"}},["backend_unhealthy"])," (",n("inlineCode",{attrs:{parentName:"td"}},["backend"]),")"]),n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),["A backend is unhealthy and will not send the request"]),n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),["Send error template with status ",n("inlineCode",{attrs:{parentName:"td"}},["502"]),"."])]),n("tr",{attrs:{parentName:"tbody"}},[n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),[n("inlineCode",{attrs:{parentName:"td"}},["access_control"])]),n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),["Access control related errors"]),n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),["Send error template with status ",n("inlineCode",{attrs:{parentName:"td"}},["403"]),"."])]),n("tr",{attrs:{parentName:"tbody"}},[n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),[n("inlineCode",{attrs:{parentName:"td"}},["beta_insufficient_permissions"])," (",n("inlineCode",{attrs:{parentName:"td"}},["access_control"]),")"]),n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),["The permission required for the requested operation is not in the permissions granted to the requester."]),n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),["Send error template with status ",n("inlineCode",{attrs:{parentName:"td"}},["403"]),"."])])])]),n("h3",["Endpoint error types"]),n("p",["The following table documents error types that can be handled in ",n("inlineCode",{attrs:{parentName:"p"}},["endpoint"])," blocks:"]),n("table",[n("thead",{attrs:{parentName:"table"}},[n("tr",{attrs:{parentName:"thead"}},[n("th",d()([{attrs:{parentName:"tr"}},{align:"left"}]),["Type (and super types)"]),n("th",d()([{attrs:{parentName:"tr"}},{align:"left"}]),["Description"]),n("th",d()([{attrs:{parentName:"tr"}},{align:"left"}]),["Default handling"])])]),n("tbody",{attrs:{parentName:"table"}},[n("tr",{attrs:{parentName:"tbody"}},[n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),[n("inlineCode",{attrs:{parentName:"td"}},["backend"])]),n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),["All catchable backend related errors"]),n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),["Send error template with status ",n("inlineCode",{attrs:{parentName:"td"}},["502"]),"."])]),n("tr",{attrs:{parentName:"tbody"}},[n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),[n("inlineCode",{attrs:{parentName:"td"}},["backend_openapi_validation"])," (",n("inlineCode",{attrs:{parentName:"td"}},["backend"]),")"]),n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),["Backend request or response is invalid"]),n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),["Send error template with status code ",n("inlineCode",{attrs:{parentName:"td"}},["400"])," for invalid backend request or ",n("inlineCode",{attrs:{parentName:"td"}},["502"])," for invalid backend response."])]),n("tr",{attrs:{parentName:"tbody"}},[n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),[n("inlineCode",{attrs:{parentName:"td"}},["backend_timeout"])," (",n("inlineCode",{attrs:{parentName:"td"}},["backend"]),")"]),n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),["A backend request timed out"]),n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),["Send error template with status ",n("inlineCode",{attrs:{parentName:"td"}},["504"]),"."])]),n("tr",{attrs:{parentName:"tbody"}},[n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),[n("inlineCode",{attrs:{parentName:"td"}},["backend_unhealthy"])," (",n("inlineCode",{attrs:{parentName:"td"}},["backend"]),")"]),n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),["A backend is unhealthy and will not send the request"]),n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),["Send error template with status ",n("inlineCode",{attrs:{parentName:"td"}},["502"]),"."])]),n("tr",{attrs:{parentName:"tbody"}},[n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),[n("inlineCode",{attrs:{parentName:"td"}},["access_control"])]),n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),["Access control related errors"]),n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),["Send error template with status ",n("inlineCode",{attrs:{parentName:"td"}},["403"]),"."])]),n("tr",{attrs:{parentName:"tbody"}},[n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),[n("inlineCode",{attrs:{parentName:"td"}},["beta_insufficient_permissions"])," (",n("inlineCode",{attrs:{parentName:"td"}},["access_control"]),")"]),n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),["The permission required for the requested operation is not in the permissions granted to the requester."]),n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),["Send error template with status ",n("inlineCode",{attrs:{parentName:"td"}},["403"]),"."])]),n("tr",{attrs:{parentName:"tbody"}},[n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),[n("inlineCode",{attrs:{parentName:"td"}},["endpoint"])]),n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),["All catchable ",n("inlineCode",{attrs:{parentName:"td"}},["endpoint"])," related errors"]),n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),["Send error template with status ",n("inlineCode",{attrs:{parentName:"td"}},["502"]),"."])]),n("tr",{attrs:{parentName:"tbody"}},[n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),[n("inlineCode",{attrs:{parentName:"td"}},["sequence"])," (",n("inlineCode",{attrs:{parentName:"td"}},["endpoint"]),")"]),n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),["A ",n("inlineCode",{attrs:{parentName:"td"}},["request"])," or ",n("inlineCode",{attrs:{parentName:"td"}},["proxy"])," block request has been failed while depending on another one"]),n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),["Send error template with status ",n("inlineCode",{attrs:{parentName:"td"}},["502"]),"."])]),n("tr",{attrs:{parentName:"tbody"}},[n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),[n("inlineCode",{attrs:{parentName:"td"}},["unexpected_status"])," (",n("inlineCode",{attrs:{parentName:"td"}},["endpoint"]),")"]),n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),["A ",n("inlineCode",{attrs:{parentName:"td"}},["request"])," or ",n("inlineCode",{attrs:{parentName:"td"}},["proxy"])," block response status code does not match the to ",n("inlineCode",{attrs:{parentName:"td"}},["expected_status"])," list"]),n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),["Send error template with status ",n("inlineCode",{attrs:{parentName:"td"}},["502"]),"."])])])])])}h.isMDXComponent=!0,e.default={name:"Mdx",inject:{$mdxComponents:{default:function(){return function(){return{}}}}},computed:{components:function(){return this.$mdxComponents()}},render:function(t){return n=m.b.bind({createElement:t,components:this.components}),h({components:this.components})}}}}]);