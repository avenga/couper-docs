(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{549:function(t,e,r){"use strict";r.r(e);var n,l=r(94),d=r.n(l),m=r(161),o=r(261),N=["components"],f={};function h(t){var e=t.components,r=Object(m.a)(t,N);return n("wrapper",d()([{},f,{},r,{attrs:{components:e,mdxType:"MDXLayout"}}]),[n("h1",["Health Block"]),n("p",["Defines a recurring health check request for its backend. Results can be obtained via the ",n("a",d()([{attrs:{parentName:"p"}},{href:"#backends"}]),[n("inlineCode",{attrs:{parentName:"a"}},["backends.<label>.health"])," variables"]),".\nChanges in health states and related requests will be logged. Default User-Agent will be ",n("inlineCode",{attrs:{parentName:"p"}},["Couper / <version> health-check"])," if not provided\nvia ",n("inlineCode",{attrs:{parentName:"p"}},["headers"])," attribute. An unhealthy backend will return with a ",n("a",d()([{attrs:{parentName:"p"}},{href:"ERRORS.md#api-error-types"}]),[n("inlineCode",{attrs:{parentName:"a"}},["backend_unhealthy"])])," error."]),n("table",[n("thead",{attrs:{parentName:"table"}},[n("tr",{attrs:{parentName:"thead"}},[n("th",d()([{attrs:{parentName:"tr"}},{align:"left"}]),["Block name"]),n("th",d()([{attrs:{parentName:"tr"}},{align:"left"}]),["Context"]),n("th",d()([{attrs:{parentName:"tr"}},{align:"left"}]),["Label"]),n("th",d()([{attrs:{parentName:"tr"}},{align:"left"}]),["Nested block"])])]),n("tbody",{attrs:{parentName:"table"}},[n("tr",{attrs:{parentName:"tbody"}},[n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),[n("inlineCode",{attrs:{parentName:"td"}},["beta_health"])]),n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),[n("a",d()([{attrs:{parentName:"td"}},{href:"#backend-block"}]),[n("inlineCode",{attrs:{parentName:"a"}},["backend"])," block"])]),n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),["–"]),n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]))])])]),n("table",[n("thead",{attrs:{parentName:"table"}},[n("tr",{attrs:{parentName:"thead"}},[n("th",d()([{attrs:{parentName:"tr"}},{align:"left"}]),["Attributes"]),n("th",d()([{attrs:{parentName:"tr"}},{align:"left"}]),["Type"]),n("th",d()([{attrs:{parentName:"tr"}},{align:"left"}]),["Default"]),n("th",d()([{attrs:{parentName:"tr"}},{align:"left"}]),["Description"]),n("th",d()([{attrs:{parentName:"tr"}},{align:"left"}]),["Characteristics"]),n("th",d()([{attrs:{parentName:"tr"}},{align:"left"}]),["Example"])])]),n("tbody",{attrs:{parentName:"table"}},[n("tr",{attrs:{parentName:"tbody"}},[n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),[n("inlineCode",{attrs:{parentName:"td"}},["expected_status"])]),n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),["tuple (number)"]),n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),[n("inlineCode",{attrs:{parentName:"td"}},["[200, 204, 301]"])]),n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),["wanted response status code"]),n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}])),n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),[n("inlineCode",{attrs:{parentName:"td"}},["expected_status = [418]"])])]),n("tr",{attrs:{parentName:"tbody"}},[n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),[n("inlineCode",{attrs:{parentName:"td"}},["expected_text"])]),n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),["string"]),n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),["–"]),n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),["text response body must contain"]),n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}])),n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),[n("inlineCode",{attrs:{parentName:"td"}},['expected_text = "alive"'])])]),n("tr",{attrs:{parentName:"tbody"}},[n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),[n("inlineCode",{attrs:{parentName:"td"}},["failure_threshold"])]),n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),["number"]),n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),[n("inlineCode",{attrs:{parentName:"td"}},["2"])]),n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),["failed checks needed to consider backend unhealthy"]),n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}])),n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),[n("inlineCode",{attrs:{parentName:"td"}},["failure_threshold = 3"])])]),n("tr",{attrs:{parentName:"tbody"}},[n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),[n("inlineCode",{attrs:{parentName:"td"}},["headers"])]),n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),["object"]),n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),["–"]),n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),["request headers"]),n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}])),n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),[n("inlineCode",{attrs:{parentName:"td"}},['headers = {User-Agent = "health"}'])])]),n("tr",{attrs:{parentName:"tbody"}},[n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),[n("inlineCode",{attrs:{parentName:"td"}},["interval"])]),n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),[n("a",d()([{attrs:{parentName:"td"}},{href:"#duration"}]),["duration"])]),n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),[n("inlineCode",{attrs:{parentName:"td"}},['"1s"'])]),n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),["time interval for recheck"]),n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}])),n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),[n("inlineCode",{attrs:{parentName:"td"}},['timeout = "5s"'])])]),n("tr",{attrs:{parentName:"tbody"}},[n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),[n("inlineCode",{attrs:{parentName:"td"}},["path"])]),n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),["string"]),n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),["–"]),n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),["URL path/query on backend host"]),n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}])),n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),[n("inlineCode",{attrs:{parentName:"td"}},['path = "/health"'])])]),n("tr",{attrs:{parentName:"tbody"}},[n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),[n("inlineCode",{attrs:{parentName:"td"}},["timeout"])]),n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),[n("a",d()([{attrs:{parentName:"td"}},{href:"#duration"}]),["duration"])]),n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),[n("inlineCode",{attrs:{parentName:"td"}},['"2s"'])]),n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),["maximum allowed time limit"]),n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),["bounded by ",n("inlineCode",{attrs:{parentName:"td"}},["interval"])]),n("td",d()([{attrs:{parentName:"tr"}},{align:"left"}]),[n("inlineCode",{attrs:{parentName:"td"}},['timeout = "3s"'])])])])])])}h.isMDXComponent=!0,e.default={name:"Mdx",inject:{$mdxComponents:{default:function(){return function(){return{}}}}},computed:{components:function(){return this.$mdxComponents()}},render:function(t){return n=o.b.bind({createElement:t,components:this.components}),h({components:this.components})}}}}]);